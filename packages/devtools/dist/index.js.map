{"version":3,"sources":["../src/components/agent-node.tsx","../src/components/tool-node.tsx","../src/components/agent-flow-visualization.tsx","../src/utils/debug.ts","../src/utils/event-parser.ts","../src/utils/stream-interceptor.ts","../src/hooks/use-ai-devtools.ts","../src/components/devtools-button.tsx","../src/hooks/use-current-state.ts","../src/utils/formatting.tsx","../src/utils/session-grouper.ts","../src/components/event-item.tsx","../src/components/tool-call-session.tsx","../src/components/event-list.tsx","../src/components/state-data-explorer.tsx","../src/components/devtools-panel.tsx","../src/components/ai-dev-tools.tsx","../src/components/store-list.tsx","../src/utils/working-state-detection.ts"],"names":["PlayArrowIcon","CheckCircleIcon","ErrorIcon","ScheduleIcon","jsxs","Fragment","jsx","Handle","Position","memo","BuildIcon","dagre","useMemo","MarkerType","useNodesState","useEdgesState","useEffect","useCallback","ReactFlow","Background","useState","useRef","ImportedChatStoreContext","React","useContext","ErrorOutlineIcon","SendIcon","CircleIcon","CodeIcon","PsychologyIcon","SettingsIcon","ApiIcon","DataObjectIcon","HelpIcon","toolName","JsonView","darkStyles","PauseIcon","ClearIcon","RightPanelIcon","BottomPanelIcon","CloseIcon"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","file":"index.js","sourcesContent":["\"use client\";\r\n\r\nimport {\r\n  CheckCircle as CheckCircleIcon,\r\n  Error as ErrorIcon,\r\n  PlayArrow as PlayArrowIcon,\r\n  Schedule as ScheduleIcon,\r\n} from \"@mui/icons-material\";\r\nimport { Handle, type NodeProps, Position } from \"@xyflow/react\";\r\nimport { memo } from \"react\";\r\nimport type { AgentNode as AgentNodeData } from \"../types\";\r\n\r\ninterface AgentNodeComponentData extends AgentNodeData {\r\n  label: string;\r\n}\r\n\r\nfunction AgentNodeComponent({ data }: NodeProps) {\r\n  const nodeData = data as unknown as AgentNodeComponentData;\r\n  const {\r\n    name,\r\n    status,\r\n    duration,\r\n    // toolCallCount,\r\n    // model,\r\n    // routingStrategy,\r\n    // matchScore,\r\n    // round,\r\n  } = nodeData;\r\n\r\n  // Status icon and color\r\n  const getStatusIcon = () => {\r\n    switch (status) {\r\n      case \"executing\":\r\n        return <PlayArrowIcon sx={{ fontSize: 16 }} />;\r\n      case \"completed\":\r\n        return <CheckCircleIcon sx={{ fontSize: 16 }} />;\r\n      case \"error\":\r\n        return <ErrorIcon sx={{ fontSize: 16 }} />;\r\n      default:\r\n        return <ScheduleIcon sx={{ fontSize: 16 }} />;\r\n    }\r\n  };\r\n\r\n  const getStatusColor = () => {\r\n    switch (status) {\r\n      case \"executing\":\r\n        return \"#f59e0b\"; // orange/yellow accent\r\n      case \"completed\":\r\n        return \"#4b5563\"; // darker gray\r\n      case \"error\":\r\n        return \"#f59e0b\"; // orange for visibility\r\n      default:\r\n        return \"#374151\"; // dark gray\r\n    }\r\n  };\r\n\r\n  const statusColor = getStatusColor();\r\n  // const isActive = status === \"executing\";\r\n\r\n  return (\r\n    <>\r\n      {/* Input handle (left for horizontal layout) */}\r\n      <Handle\r\n        type=\"target\"\r\n        position={Position.Left}\r\n        style={{\r\n          background: \"#3f3f46\",\r\n          width: 10,\r\n          height: 10,\r\n          border: \"2px solid #18181b\",\r\n        }}\r\n      />\r\n\r\n      {/* Node content */}\r\n      <div\r\n        className=\"agent-node\"\r\n        style={{\r\n          background: \"#18181b\",\r\n          border: `1px solid #3f3f46`,\r\n          borderRadius: 0,\r\n          padding: \"16px 18px\",\r\n          minWidth: 200,\r\n          boxShadow: \"0 4px 12px rgba(0, 0, 0, 0.5)\",\r\n        }}\r\n      >\r\n        {/* Label: AGENT */}\r\n        <div\r\n          style={{\r\n            fontSize: 10,\r\n            fontWeight: 700,\r\n            letterSpacing: \"0.05em\",\r\n            color: \"#71717a\",\r\n            marginBottom: 8,\r\n            textTransform: \"uppercase\",\r\n          }}\r\n        >\r\n          AGENT\r\n        </div>\r\n\r\n        {/* Header: Name and Status Icon */}\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            gap: 8,\r\n            marginBottom: 12,\r\n          }}\r\n        >\r\n          <div\r\n            style={{\r\n              fontWeight: 600,\r\n              fontSize: 15,\r\n              color: \"#f4f4f5\",\r\n            }}\r\n          >\r\n            {name}\r\n          </div>\r\n          <div style={{ color: statusColor, display: \"flex\", fontSize: 14 }}>\r\n            {getStatusIcon()}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Agent ID or description */}\r\n        <div\r\n          style={{\r\n            fontSize: 13,\r\n            color: \"#a1a1aa\",\r\n            marginBottom: duration !== undefined ? 12 : 0,\r\n            fontFamily: \"monospace\",\r\n          }}\r\n        >\r\n          {name.toLowerCase().replace(/\\s+/g, \"-\")}\r\n        </div>\r\n\r\n        {/* Duration */}\r\n        {duration !== undefined && (\r\n          <>\r\n            <div\r\n              style={{\r\n                height: 1,\r\n                background: \"#27272a\",\r\n                margin: \"12px 0\",\r\n              }}\r\n            />\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                justifyContent: \"space-between\",\r\n                alignItems: \"center\",\r\n                fontSize: 12,\r\n              }}\r\n            >\r\n              <span style={{ color: \"#71717a\" }}>Duration</span>\r\n              <span style={{ color: \"#f4f4f5\", fontWeight: 500 }}>\r\n                {duration.toFixed(2)}s\r\n              </span>\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      {/* Output handle (right for horizontal layout) */}\r\n      <Handle\r\n        type=\"source\"\r\n        position={Position.Right}\r\n        style={{\r\n          background: \"#3f3f46\",\r\n          width: 10,\r\n          height: 10,\r\n          border: \"2px solid #18181b\",\r\n        }}\r\n      />\r\n\r\n      {/* Add pulse animation styles inline */}\r\n      <style>\r\n        {`\r\n          @keyframes pulse-glow {\r\n            0%, 100% {\r\n              box-shadow: 0 0 20px ${statusColor}40, 0 4px 6px -1px rgb(0 0 0 / 0.3);\r\n            }\r\n            50% {\r\n              box-shadow: 0 0 30px ${statusColor}60, 0 4px 6px -1px rgb(0 0 0 / 0.3);\r\n            }\r\n          }\r\n        `}\r\n      </style>\r\n    </>\r\n  );\r\n}\r\n\r\nexport const AgentNode = memo(AgentNodeComponent);\r\n","\"use client\";\r\n\r\nimport { Build as BuildIcon } from \"@mui/icons-material\";\r\nimport { Handle, type NodeProps, Position } from \"@xyflow/react\";\r\nimport { memo } from \"react\";\r\n\r\ninterface ToolNodeData {\r\n  name: string;\r\n  description?: string;\r\n  label: string;\r\n}\r\n\r\nfunction ToolNodeComponent({ data }: NodeProps) {\r\n  const nodeData = data as unknown as ToolNodeData;\r\n  const { name, description } = nodeData;\r\n\r\n  return (\r\n    <>\r\n      {/* Input handle (left for horizontal layout) */}\r\n      <Handle\r\n        type=\"target\"\r\n        position={Position.Left}\r\n        style={{\r\n          background: \"#3f3f46\",\r\n          width: 10,\r\n          height: 10,\r\n          border: \"2px solid #18181b\",\r\n        }}\r\n      />\r\n\r\n      {/* Node content */}\r\n      <div\r\n        className=\"tool-node\"\r\n        style={{\r\n          background: \"#18181b\",\r\n          border: `1px solid #3f3f46`,\r\n          borderRadius: 0,\r\n          padding: \"16px 18px\",\r\n          minWidth: 200,\r\n          boxShadow: \"0 4px 12px rgba(0, 0, 0, 0.5)\",\r\n        }}\r\n      >\r\n        {/* Label: TOOL */}\r\n        <div\r\n          style={{\r\n            fontSize: 10,\r\n            fontWeight: 700,\r\n            letterSpacing: \"0.05em\",\r\n            color: \"#71717a\",\r\n            marginBottom: 8,\r\n            textTransform: \"uppercase\",\r\n          }}\r\n        >\r\n          TOOL\r\n        </div>\r\n\r\n        {/* Header: Name and Icon */}\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            gap: 8,\r\n            marginBottom: 12,\r\n          }}\r\n        >\r\n          <div\r\n            style={{\r\n              fontWeight: 600,\r\n              fontSize: 15,\r\n              color: \"#f4f4f5\",\r\n            }}\r\n          >\r\n            {name}\r\n          </div>\r\n          <div style={{ color: \"#f59e0b\", display: \"flex\", fontSize: 14 }}>\r\n            <BuildIcon sx={{ fontSize: 16 }} />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Description */}\r\n        {description && (\r\n          <div\r\n            style={{\r\n              fontSize: 13,\r\n              color: \"#a1a1aa\",\r\n            }}\r\n          >\r\n            {description}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Output handle (right for horizontal layout) */}\r\n      <Handle\r\n        type=\"source\"\r\n        position={Position.Right}\r\n        style={{\r\n          background: \"#3f3f46\",\r\n          width: 10,\r\n          height: 10,\r\n          border: \"2px solid #18181b\",\r\n        }}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport const ToolNode = memo(ToolNodeComponent);\r\n","\"use client\";\r\n\r\nimport {\r\n  Background,\r\n  type Edge,\r\n  MarkerType,\r\n  type Node,\r\n  Position,\r\n  ReactFlow,\r\n  useEdgesState,\r\n  useNodesState,\r\n} from \"@xyflow/react\";\r\nimport dagre from \"dagre\";\r\nimport { useCallback, useEffect, useMemo } from \"react\";\r\nimport \"@xyflow/react/dist/style.css\";\r\nimport type { AgentFlowData, AIEvent } from \"../types\";\r\nimport { AgentNode } from \"./agent-node\";\r\nimport { ToolNode } from \"./tool-node\";\r\n\r\ninterface AgentFlowVisualizationProps {\r\n  events: AIEvent[];\r\n}\r\n\r\nconst nodeTypes = {\r\n  agentNode: AgentNode,\r\n  toolNode: ToolNode,\r\n} as const;\r\n\r\n// Auto-layout using dagre\r\nfunction getLayoutedElements(\r\n  nodes: Node[],\r\n  edges: Edge[],\r\n  direction = \"LR\",\r\n): { nodes: Node[]; edges: Edge[] } {\r\n  const dagreGraph = new dagre.graphlib.Graph();\r\n  dagreGraph.setDefaultEdgeLabel(() => ({}));\r\n\r\n  const nodeWidth = 220;\r\n  const nodeHeight = 180;\r\n  const isHorizontal = direction === \"LR\";\r\n\r\n  dagreGraph.setGraph({ rankdir: direction, ranksep: 250, nodesep: 120 });\r\n\r\n  nodes.forEach((node) => {\r\n    dagreGraph.setNode(node.id, { width: nodeWidth, height: nodeHeight });\r\n  });\r\n\r\n  edges.forEach((edge) => {\r\n    dagreGraph.setEdge(edge.source, edge.target);\r\n  });\r\n\r\n  dagre.layout(dagreGraph);\r\n\r\n  const layoutedNodes = nodes.map((node) => {\r\n    const nodeWithPosition = dagreGraph.node(node.id);\r\n    return {\r\n      ...node,\r\n      targetPosition: isHorizontal ? Position.Left : Position.Top,\r\n      sourcePosition: isHorizontal ? Position.Right : Position.Bottom,\r\n      // Shift dagre node position (anchor=center) to top-left\r\n      // to match React Flow node anchor point (top-left)\r\n      position: {\r\n        x: nodeWithPosition.x - nodeWidth / 2,\r\n        y: nodeWithPosition.y - nodeHeight / 2,\r\n      },\r\n    };\r\n  });\r\n\r\n  return { nodes: layoutedNodes, edges };\r\n}\r\n\r\n// Process events into agent flow data\r\nfunction processAgentEvents(events: AIEvent[]): AgentFlowData {\r\n  const agentMap = new Map<\r\n    string,\r\n    {\r\n      name: string;\r\n      status: \"idle\" | \"executing\" | \"completed\" | \"error\";\r\n      startTime?: number;\r\n      endTime?: number;\r\n      toolCallCount: number;\r\n      routingStrategy?: \"programmatic\" | \"llm\";\r\n      matchScore?: number;\r\n      round?: number;\r\n      model?: string;\r\n    }\r\n  >();\r\n  const handoffs: Array<{\r\n    id: string;\r\n    from: string;\r\n    to: string;\r\n    reason?: string;\r\n    routingStrategy?: \"programmatic\" | \"llm\";\r\n    timestamp: number;\r\n  }> = [];\r\n  const toolMap = new Map<\r\n    string,\r\n    {\r\n      name: string;\r\n      agent?: string;\r\n      description?: string;\r\n      callCount: number;\r\n    }\r\n  >();\r\n  let totalRounds = 0;\r\n  let isActive = false;\r\n  let currentAgent: string | undefined;\r\n\r\n  for (const event of events) {\r\n    switch (event.type) {\r\n      case \"agent-start\": {\r\n        const agentName = event.metadata?.agent;\r\n        if (agentName) {\r\n          currentAgent = agentName;\r\n          const existing = agentMap.get(agentName);\r\n          agentMap.set(agentName, {\r\n            name: agentName,\r\n            status: \"executing\",\r\n            // Preserve original startTime if it exists (don't overwrite on subsequent starts)\r\n            startTime: existing?.startTime || event.timestamp,\r\n            endTime: existing?.endTime,\r\n            toolCallCount: existing?.toolCallCount || 0,\r\n            routingStrategy: event.metadata?.routingStrategy,\r\n            matchScore: event.metadata?.matchScore,\r\n            round: event.metadata?.round,\r\n            model: event.metadata?.model || existing?.model,\r\n          });\r\n          isActive = true;\r\n        }\r\n        break;\r\n      }\r\n\r\n      case \"agent-finish\": {\r\n        const agentName = event.metadata?.agent;\r\n        if (agentName && agentMap.has(agentName)) {\r\n          const agent = agentMap.get(agentName);\r\n          if (agent) {\r\n            agentMap.set(agentName, {\r\n              ...agent,\r\n              status: \"completed\",\r\n              endTime: event.timestamp,\r\n              model: event.metadata?.model || agent.model,\r\n            });\r\n          }\r\n        }\r\n        break;\r\n      }\r\n\r\n      case \"agent-error\": {\r\n        const agentName = event.metadata?.agent;\r\n        if (agentName && agentMap.has(agentName)) {\r\n          const agent = agentMap.get(agentName);\r\n          if (agent) {\r\n            agentMap.set(agentName, {\r\n              ...agent,\r\n              status: \"error\",\r\n              endTime: event.timestamp,\r\n            });\r\n          }\r\n        }\r\n        break;\r\n      }\r\n\r\n      case \"agent-handoff\": {\r\n        const fromAgent = event.metadata?.fromAgent;\r\n        const toAgent = event.metadata?.toAgent;\r\n        if (fromAgent && toAgent) {\r\n          handoffs.push({\r\n            id: `handoff-${handoffs.length}`,\r\n            from: fromAgent,\r\n            to: toAgent,\r\n            reason: event.metadata?.reason,\r\n            routingStrategy: event.metadata?.routingStrategy,\r\n            timestamp: event.timestamp,\r\n          });\r\n\r\n          // Set routing strategy on the target agent\r\n          if (toAgent && event.metadata?.routingStrategy) {\r\n            const targetAgent = agentMap.get(toAgent);\r\n            if (targetAgent) {\r\n              agentMap.set(toAgent, {\r\n                ...targetAgent,\r\n                routingStrategy: event.metadata.routingStrategy,\r\n              });\r\n            } else {\r\n              // Create placeholder for target agent if it doesn't exist yet\r\n              agentMap.set(toAgent, {\r\n                name: toAgent,\r\n                status: \"idle\",\r\n                toolCallCount: 0,\r\n                routingStrategy: event.metadata.routingStrategy,\r\n              });\r\n            }\r\n          }\r\n        }\r\n        break;\r\n      }\r\n\r\n      case \"agent-complete\": {\r\n        totalRounds = event.metadata?.totalRounds || totalRounds;\r\n        isActive = false;\r\n        break;\r\n      }\r\n\r\n      case \"tool-call-start\": {\r\n        // Track tool calls and create tool nodes\r\n        const toolName = event.metadata?.toolName || event.data?.toolName;\r\n        const agentName = currentAgent || event.metadata?.agent;\r\n\r\n        // Filter out internal orchestration tools from visualization\r\n        const isInternalTool = toolName === \"handoff_to_agent\"\r\n\r\n        // Only track valid tool names (not undefined, empty, \"unknown\", or internal)\r\n        if (\r\n          toolName &&\r\n          toolName !== \"unknown\" &&\r\n          toolName.trim() !== \"\" &&\r\n          !isInternalTool\r\n        ) {\r\n          const existing = toolMap.get(toolName);\r\n          toolMap.set(toolName, {\r\n            name: toolName,\r\n            agent: agentName,\r\n            description: event.metadata?.description || `${toolName} tool`,\r\n            callCount: (existing?.callCount || 0) + 1,\r\n          });\r\n\r\n          // Also increment agent's tool call count\r\n          if (agentName && agentMap.has(agentName)) {\r\n            const agent = agentMap.get(agentName);\r\n            if (agent) {\r\n              agentMap.set(agentName, {\r\n                ...agent,\r\n                toolCallCount: agent.toolCallCount + 1,\r\n              });\r\n            }\r\n          }\r\n        }\r\n        break;\r\n      }\r\n\r\n      case \"finish\": {\r\n        // Try to extract model from response metadata\r\n        if (currentAgent && agentMap.has(currentAgent)) {\r\n          const agent = agentMap.get(currentAgent);\r\n          const responseModel =\r\n            event.data?.response?.model || event.data?.model;\r\n          if (agent && responseModel) {\r\n            agentMap.set(currentAgent, {\r\n              ...agent,\r\n              model: responseModel,\r\n            });\r\n          }\r\n        }\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  const nodes = Array.from(agentMap.entries()).map(([id, data]) => ({\r\n    id,\r\n    ...data,\r\n    duration:\r\n      data.startTime && data.endTime\r\n        ? (data.endTime - data.startTime) / 1000\r\n        : undefined,\r\n  }));\r\n\r\n  const tools = Array.from(toolMap.entries()).map(([id, data]) => ({\r\n    id,\r\n    ...data,\r\n  }));\r\n\r\n  const firstEvent = events.find(\r\n    (e) => e.type === \"agent-start\" || e.type === \"agent-handoff\",\r\n  );\r\n  const lastEvent = [...events]\r\n    .reverse()\r\n    .find((e) => e.type === \"agent-finish\" || e.type === \"agent-complete\");\r\n\r\n  const totalDuration =\r\n    firstEvent && lastEvent\r\n      ? (lastEvent.timestamp - firstEvent.timestamp) / 1000\r\n      : 0;\r\n\r\n  return {\r\n    nodes,\r\n    tools,\r\n    handoffs,\r\n    totalRounds,\r\n    totalDuration,\r\n    isActive,\r\n  };\r\n}\r\n\r\nexport function AgentFlowVisualization({\r\n  events,\r\n}: AgentFlowVisualizationProps) {\r\n  const agentFlowData = useMemo(() => processAgentEvents(events), [events]);\r\n\r\n  // Convert agent flow data to ReactFlow nodes and edges\r\n  const initialNodes: Node[] = useMemo(() => {\r\n    const agentNodes = agentFlowData.nodes.map((node, index) => ({\r\n      id: node.id,\r\n      type: \"agentNode\",\r\n      position: { x: index * 300, y: 50 },\r\n      data: {\r\n        ...node,\r\n        label: node.name,\r\n      },\r\n    }));\r\n\r\n    const toolNodes = agentFlowData.tools.map((tool) => {\r\n      // Position tool nodes below their associated agents\r\n      const agentIndex = agentFlowData.nodes.findIndex(\r\n        (n) => n.id === tool.agent,\r\n      );\r\n      return {\r\n        id: `tool-${tool.id}`,\r\n        type: \"toolNode\",\r\n        position: { x: agentIndex >= 0 ? agentIndex * 300 : 0, y: 280 },\r\n        data: {\r\n          ...tool,\r\n          label: tool.name,\r\n          description: `A ${tool.name} tool`,\r\n        },\r\n      };\r\n    });\r\n\r\n    return [...agentNodes, ...toolNodes];\r\n  }, [agentFlowData.nodes, agentFlowData.tools]);\r\n\r\n  const initialEdges: Edge[] = useMemo(() => {\r\n    // Agent handoff edges\r\n    const handoffEdges = agentFlowData.handoffs.map((handoff) => {\r\n      // Format label as \"Routing (strategy)\"\r\n      const label = handoff.routingStrategy\r\n        ? `Routing (${handoff.routingStrategy})`\r\n        : handoff.reason || \"Handoff\";\r\n\r\n      return {\r\n        id: handoff.id,\r\n        source: handoff.from,\r\n        target: handoff.to,\r\n        type: \"smoothstep\",\r\n        animated: true,\r\n        label,\r\n        style: { stroke: \"#3f3f46\", strokeWidth: 1.5 },\r\n        labelStyle: {\r\n          fill: \"#71717a\",\r\n          fontSize: 10,\r\n          fontWeight: 500,\r\n        },\r\n        labelBgStyle: { fill: \"#18181b\", fillOpacity: 0.95 },\r\n        markerEnd: {\r\n          type: MarkerType.ArrowClosed,\r\n          width: 16,\r\n          height: 16,\r\n          color: \"#3f3f46\",\r\n        },\r\n      };\r\n    });\r\n\r\n    // Agent to tool edges\r\n    const toolEdges = agentFlowData.tools.map((tool) => ({\r\n      id: `edge-${tool.agent}-${tool.id}`,\r\n      source: tool.agent || \"\",\r\n      target: `tool-${tool.id}`,\r\n      type: \"smoothstep\",\r\n      animated: true,\r\n      style: { stroke: \"#3f3f46\", strokeWidth: 1, strokeDasharray: \"5,5\" },\r\n      markerEnd: {\r\n        type: MarkerType.ArrowClosed,\r\n        width: 12,\r\n        height: 12,\r\n        color: \"#3f3f46\",\r\n      },\r\n    }));\r\n\r\n    return [...handoffEdges, ...toolEdges];\r\n  }, [agentFlowData.handoffs, agentFlowData.tools]);\r\n\r\n  // Apply dagre layout to nodes (LR = left-to-right tree layout)\r\n  const layoutedElements = useMemo(() => {\r\n    return getLayoutedElements(initialNodes, initialEdges, \"LR\");\r\n  }, [initialNodes, initialEdges]);\r\n\r\n  const [nodes, setNodes, onNodesChange] = useNodesState(\r\n    layoutedElements.nodes,\r\n  );\r\n  const [edges, setEdges, onEdgesChange] = useEdgesState(\r\n    layoutedElements.edges,\r\n  );\r\n\r\n  // Update nodes and edges when data changes\r\n  useEffect(() => {\r\n    const newLayout = getLayoutedElements(initialNodes, initialEdges, \"LR\");\r\n    setNodes(newLayout.nodes);\r\n    setEdges(newLayout.edges);\r\n  }, [initialNodes, initialEdges, setNodes, setEdges]);\r\n\r\n  const onInit = useCallback(() => {\r\n    // Optional: Add any initialization logic\r\n  }, []);\r\n\r\n  // Show empty state if no agent events\r\n  if (agentFlowData.nodes.length === 0) {\r\n    return (\r\n      <div\r\n        style={{\r\n          height: \"100%\",\r\n          width: \"100%\",\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n          background: \"#09090b\",\r\n        }}\r\n      >\r\n        <div className=\"ai-devtools-state-explorer-empty-content\">\r\n          <div className=\"ai-devtools-state-explorer-empty-title\">\r\n            No Agent Activity\r\n          </div>\r\n          <div className=\"ai-devtools-state-explorer-empty-description\">\r\n            Start a conversation with an agent-based\r\n            <br /> system to see the orchestration flow here\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={{ height: \"100%\", width: \"100%\", background: \"#000000\" }}>\r\n      {/* ReactFlow canvas */}\r\n      <div style={{ height: \"100%\", width: \"100%\", position: \"relative\" }}>\r\n        <ReactFlow\r\n          nodes={nodes}\r\n          edges={edges}\r\n          onNodesChange={onNodesChange}\r\n          onEdgesChange={onEdgesChange}\r\n          onInit={onInit}\r\n          nodeTypes={nodeTypes}\r\n          fitView\r\n          fitViewOptions={{ padding: 0.3, maxZoom: 0.8 }}\r\n          minZoom={0.3}\r\n          maxZoom={2}\r\n          nodesConnectable={false}\r\n          edgesReconnectable={false}\r\n          edgesFocusable={false}\r\n          defaultEdgeOptions={{\r\n            type: \"smoothstep\",\r\n            animated: true,\r\n          }}\r\n        >\r\n          <Background\r\n            color=\"#3f3f46\"\r\n            gap={24}\r\n            size={1}\r\n            style={{ background: \"#000000\" }}\r\n          />\r\n        </ReactFlow>\r\n        \r\n        {/* Agent Stats Footer */}\r\n        <div style={{\r\n          position: \"absolute\",\r\n          bottom: 0,\r\n          left: 0,\r\n          right: 0,\r\n          height: \"24px\",\r\n          display: \"flex\",\r\n          justifyContent: \"flex-end\",\r\n          alignItems: \"center\",\r\n          padding: \"0 12px\",\r\n          fontFamily: \"Geist Mono, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace\",\r\n          fontSize: \"10px\",\r\n          color: \"#cccccc\"\r\n        }}>\r\n          <div style={{ display: \"flex\", gap: \"16px\", alignItems: \"center\" }}>\r\n            <div style={{ display: \"flex\", alignItems: \"center\", gap: \"4px\" }}>\r\n              <span style={{ fontWeight: 600, color: \"#ffffff\" }}>{agentFlowData.nodes.length}</span>\r\n              <span style={{ color: \"#666666\" }}>Agents</span>\r\n            </div>\r\n            <div style={{ display: \"flex\", alignItems: \"center\", gap: \"4px\" }}>\r\n              <span style={{ fontWeight: 600, color: \"#ffffff\" }}>{agentFlowData.handoffs.length}</span>\r\n              <span style={{ color: \"#666666\" }}>Handoffs</span>\r\n            </div>\r\n            <div style={{ display: \"flex\", alignItems: \"center\", gap: \"4px\" }}>\r\n              <span style={{ fontWeight: 600, color: \"#ffffff\" }}>{agentFlowData.totalRounds}</span>\r\n              <span style={{ color: \"#666666\" }}>Rounds</span>\r\n            </div>\r\n            <div style={{ display: \"flex\", alignItems: \"center\", gap: \"4px\" }}>\r\n              <span style={{ fontWeight: 600, color: \"#ffffff\" }}>\r\n                {agentFlowData.totalDuration > 0 \r\n                  ? `${(agentFlowData.totalDuration / 1000).toFixed(2)}s`\r\n                  : \"0s\"\r\n                }\r\n              </span>\r\n              <span style={{ color: \"#666666\" }}>Duration</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Add pulse animation styles */}\r\n      <style>\r\n        {`\r\n          @keyframes pulse {\r\n            0%, 100% {\r\n              opacity: 1;\r\n            }\r\n            50% {\r\n              opacity: 0.5;\r\n            }\r\n          }\r\n          \r\n          /* Dark mode ReactFlow overrides */\r\n          .react-flow__node {\r\n            cursor: pointer;\r\n          }\r\n          \r\n          .react-flow__edge-path {\r\n            stroke: #3f3f46;\r\n          }\r\n          \r\n          .react-flow__edge-text {\r\n            fill: #71717a;\r\n          }\r\n          \r\n          .react-flow__background {\r\n            background: #000000;\r\n          }\r\n          \r\n          .react-flow__pane {\r\n            cursor: default;\r\n          }\r\n          \r\n          /* Hide ReactFlow attribution */\r\n          .react-flow__panel.react-flow__attribution {\r\n            display: none;\r\n          }\r\n        `}\r\n      </style>\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * Debug logging utility for AI SDK Devtools\r\n * Provides controlled logging that only outputs when debug mode is enabled\r\n */\r\n\r\nexport function createDebugLogger(debug: boolean) {\r\n  return (...args: any[]) => {\r\n    if (debug) {\r\n      console.log(...args);\r\n    }\r\n  };\r\n}\r\n","import type { AIEvent } from \"../types\";\r\n\r\n/**\r\n * Parses a Server-Sent Event message and converts it to an AIEvent\r\n */\r\nexport function parseSSEEvent(\r\n  eventData: string,\r\n  eventType: string,\r\n  eventId: string,\r\n): AIEvent | null {\r\n  const timestamp = Date.now();\r\n\r\n  try {\r\n    // Handle [DONE] message\r\n    if (eventData.trim() === \"[DONE]\") {\r\n      return {\r\n        id: eventId,\r\n        timestamp,\r\n        type: \"stream-done\",\r\n        data: {\r\n          message: \"[DONE]\",\r\n        },\r\n      };\r\n    }\r\n\r\n    // Try to parse JSON data\r\n    let parsedData: any;\r\n    try {\r\n      parsedData = JSON.parse(eventData);\r\n    } catch {\r\n      // If not JSON, treat as plain text\r\n      parsedData = { message: eventData };\r\n    }\r\n\r\n    // Use the parsed data to create an event\r\n    return parseEventFromDataPart(parsedData, eventId);\r\n  } catch (error) {\r\n    // Create an error event for parsing failures\r\n    return {\r\n      id: eventId,\r\n      timestamp,\r\n      type: \"error\",\r\n      data: {\r\n        error:\r\n          error instanceof Error ? error.message : \"Failed to parse SSE event\",\r\n        originalData: eventData,\r\n        originalType: eventType,\r\n      },\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Parses a data part from the AI stream and converts it to an AIEvent\r\n * This function handles AI SDK stream parts and custom event types\r\n */\r\nexport function parseEventFromDataPart(\r\n  dataPart: any,\r\n  eventId: string,\r\n): AIEvent | null {\r\n  const timestamp = Date.now();\r\n\r\n  // Handle different types of data parts\r\n  if (!dataPart || typeof dataPart !== \"object\") {\r\n    return null;\r\n  }\r\n\r\n  // Check if this is a standard AI SDK stream part\r\n  if (dataPart.type && isAIStreamPart(dataPart)) {\r\n    return parseAIStreamPart(dataPart, eventId, timestamp);\r\n  }\r\n\r\n  // Tool call events - these come from the AI SDK\r\n  if (dataPart.type?.startsWith(\"tool-call\")) {\r\n    const toolName =\r\n      extractToolNameFromType(dataPart.type) ||\r\n      extractToolNameFromData(dataPart) ||\r\n      \"unknown\";\r\n\r\n    if (dataPart.type.endsWith(\"-start\")) {\r\n      return {\r\n        id: eventId,\r\n        timestamp,\r\n        type: \"tool-call-start\",\r\n        data: {\r\n          toolName,\r\n          toolParams: dataPart.args || dataPart.parameters || {},\r\n        },\r\n        metadata: {\r\n          toolName,\r\n          toolParams: dataPart.args || dataPart.parameters || {},\r\n          messageId: dataPart.id,\r\n        },\r\n      };\r\n    }\r\n\r\n    if (dataPart.type.endsWith(\"-result\") || dataPart.type.includes(\"result\")) {\r\n      return {\r\n        id: eventId,\r\n        timestamp,\r\n        type: \"tool-call-result\",\r\n        data: {\r\n          toolName,\r\n          result: dataPart.result || dataPart.data,\r\n          duration: dataPart.duration,\r\n        },\r\n        metadata: {\r\n          toolName,\r\n          duration: dataPart.duration,\r\n          messageId: dataPart.id,\r\n        },\r\n      };\r\n    }\r\n\r\n    if (dataPart.type.endsWith(\"-error\") || dataPart.type.includes(\"error\")) {\r\n      return {\r\n        id: eventId,\r\n        timestamp,\r\n        type: \"tool-call-error\",\r\n        data: {\r\n          toolName,\r\n          error: dataPart.error || dataPart.message || \"Tool execution failed\",\r\n        },\r\n        metadata: {\r\n          toolName,\r\n          messageId: dataPart.id,\r\n        },\r\n      };\r\n    }\r\n  }\r\n\r\n  // Tool input events\r\n  if (dataPart.type === \"tool-input-start\") {\r\n    return {\r\n      id: eventId,\r\n      timestamp,\r\n      type: \"tool-call-start\",\r\n      data: {\r\n        toolName: dataPart.toolName,\r\n        toolCallId: dataPart.toolCallId,\r\n        toolParams: {},\r\n      },\r\n      metadata: {\r\n        toolName: dataPart.toolName,\r\n        toolCallId: dataPart.toolCallId,\r\n        messageId: dataPart.id,\r\n      },\r\n    };\r\n  }\r\n\r\n  if (dataPart.type === \"tool-input-delta\") {\r\n    const toolName =\r\n      dataPart.toolName || extractToolNameFromData(dataPart) || \"unknown\";\r\n    return {\r\n      id: eventId,\r\n      timestamp,\r\n      type: \"tool-call-start\",\r\n      data: {\r\n        toolName,\r\n        toolCallId: dataPart.toolCallId,\r\n        inputDelta: dataPart.inputTextDelta,\r\n      },\r\n      metadata: {\r\n        toolName,\r\n        toolCallId: dataPart.toolCallId,\r\n        messageId: dataPart.id,\r\n      },\r\n    };\r\n  }\r\n\r\n  if (dataPart.type === \"tool-input-available\") {\r\n    const toolName =\r\n      dataPart.toolName || extractToolNameFromData(dataPart) || \"unknown\";\r\n    return {\r\n      id: eventId,\r\n      timestamp,\r\n      type: \"tool-call-start\",\r\n      data: {\r\n        toolName,\r\n        toolCallId: dataPart.toolCallId,\r\n        toolParams: dataPart.input || {},\r\n      },\r\n      metadata: {\r\n        toolName,\r\n        toolCallId: dataPart.toolCallId,\r\n        messageId: dataPart.id,\r\n      },\r\n    };\r\n  }\r\n\r\n  if (dataPart.type === \"tool-output-available\") {\r\n    // For tool-output-available, we might not have toolName in the data\r\n    // This will be resolved by the session grouping logic\r\n    const toolName =\r\n      dataPart.toolName || extractToolNameFromData(dataPart) || \"unknown\";\r\n    return {\r\n      id: eventId,\r\n      timestamp,\r\n      type: \"tool-call-result\",\r\n      data: {\r\n        toolName,\r\n        toolCallId: dataPart.toolCallId,\r\n        result: dataPart.output,\r\n        preliminary: dataPart.preliminary,\r\n      },\r\n      metadata: {\r\n        toolName,\r\n        toolCallId: dataPart.toolCallId,\r\n        preliminary: dataPart.preliminary,\r\n        messageId: dataPart.id,\r\n      },\r\n    };\r\n  }\r\n\r\n  // Tool events with different format\r\n  if (dataPart.type?.startsWith(\"tool-\")) {\r\n    const toolName = dataPart.type.replace(\"tool-\", \"\");\r\n\r\n    return {\r\n      id: eventId,\r\n      timestamp,\r\n      type: \"tool-call-result\",\r\n      data: {\r\n        toolName,\r\n        result: dataPart.output || dataPart.data,\r\n        duration: dataPart.duration,\r\n      },\r\n      metadata: {\r\n        toolName,\r\n        duration: dataPart.duration,\r\n        messageId: dataPart.id,\r\n      },\r\n    };\r\n  }\r\n\r\n  // New streaming event types\r\n  if (dataPart.type === \"start\") {\r\n    return {\r\n      id: eventId,\r\n      timestamp,\r\n      type: \"start\",\r\n      data: dataPart,\r\n    };\r\n  }\r\n\r\n  if (dataPart.type === \"reasoning-start\") {\r\n    return {\r\n      id: eventId,\r\n      timestamp,\r\n      type: \"reasoning-start\",\r\n      data: dataPart,\r\n      metadata: {\r\n        messageId: dataPart.id,\r\n      },\r\n    };\r\n  }\r\n\r\n  if (dataPart.type === \"reasoning-delta\") {\r\n    return {\r\n      id: eventId,\r\n      timestamp,\r\n      type: \"reasoning-delta\",\r\n      data: {\r\n        id: dataPart.id,\r\n        delta: dataPart.delta || \"\",\r\n      },\r\n      metadata: {\r\n        messageId: dataPart.id,\r\n      },\r\n    };\r\n  }\r\n\r\n  if (dataPart.type === \"reasoning-end\") {\r\n    return {\r\n      id: eventId,\r\n      timestamp,\r\n      type: \"reasoning-end\",\r\n      data: dataPart,\r\n      metadata: {\r\n        messageId: dataPart.id,\r\n      },\r\n    };\r\n  }\r\n\r\n  if (dataPart.type === \"start-step\") {\r\n    return {\r\n      id: eventId,\r\n      timestamp,\r\n      type: \"start-step\",\r\n      data: {\r\n        step: dataPart.step || \"unknown\",\r\n      },\r\n    };\r\n  }\r\n\r\n  if (dataPart.type === \"text-start\") {\r\n    return {\r\n      id: eventId,\r\n      timestamp,\r\n      type: \"text-start\",\r\n      data: {\r\n        id: dataPart.id,\r\n        providerMetadata: dataPart.providerMetadata,\r\n      },\r\n      metadata: {\r\n        messageId: dataPart.id,\r\n      },\r\n    };\r\n  }\r\n\r\n  if (dataPart.type === \"text-delta\") {\r\n    return {\r\n      id: eventId,\r\n      timestamp,\r\n      type: \"text-delta\",\r\n      data: {\r\n        id: dataPart.id,\r\n        delta: dataPart.delta || \"\",\r\n      },\r\n      metadata: {\r\n        messageId: dataPart.id,\r\n      },\r\n    };\r\n  }\r\n\r\n  if (dataPart.type === \"text-end\") {\r\n    return {\r\n      id: eventId,\r\n      timestamp,\r\n      type: \"text-end\",\r\n      data: {\r\n        id: dataPart.id,\r\n      },\r\n      metadata: {\r\n        messageId: dataPart.id,\r\n      },\r\n    };\r\n  }\r\n\r\n  if (dataPart.type === \"finish-step\") {\r\n    return {\r\n      id: eventId,\r\n      timestamp,\r\n      type: \"finish-step\",\r\n      data: {\r\n        step: dataPart.step || \"unknown\",\r\n      },\r\n    };\r\n  }\r\n\r\n  if (dataPart.type === \"finish\") {\r\n    return {\r\n      id: eventId,\r\n      timestamp,\r\n      type: \"finish\",\r\n      data: {\r\n        reason: dataPart.reason,\r\n      },\r\n    };\r\n  }\r\n\r\n  // Handle agent orchestration data events (from @ai-sdk-tools/agents)\r\n  if (dataPart.type === \"data-agent-status\") {\r\n    const agentData = dataPart.data || {};\r\n    return {\r\n      id: eventId,\r\n      timestamp,\r\n      type:\r\n        agentData.status === \"executing\" || agentData.status === \"routing\"\r\n          ? \"agent-start\"\r\n          : agentData.status === \"completing\"\r\n            ? \"agent-finish\"\r\n            : \"unknown\",\r\n      data: agentData,\r\n      metadata: {\r\n        agent: agentData.agent,\r\n        originalType: dataPart.type,\r\n      },\r\n    };\r\n  }\r\n\r\n  // Handle agent handoff events\r\n  if (dataPart.type === \"data-agent-handoff\") {\r\n    const handoffData = dataPart.data || {};\r\n    return {\r\n      id: eventId,\r\n      timestamp,\r\n      type: \"agent-handoff\",\r\n      data: handoffData,\r\n      metadata: {\r\n        fromAgent: handoffData.from,\r\n        toAgent: handoffData.to,\r\n        reason: handoffData.reason,\r\n        routingStrategy: handoffData.routingStrategy,\r\n        originalType: dataPart.type,\r\n      },\r\n    };\r\n  }\r\n\r\n  // Handle custom data types (data-canvas, data-weather, etc.)\r\n  if (dataPart.type?.startsWith(\"data-\")) {\r\n    const dataType = dataPart.type.replace(\"data-\", \"\");\r\n    return {\r\n      id: eventId,\r\n      timestamp,\r\n      type: \"custom-data\",\r\n      data: {\r\n        dataType,\r\n        data: dataPart.data,\r\n        id: dataPart.id,\r\n        transient: dataPart.transient,\r\n      },\r\n      metadata: {\r\n        originalType: dataPart.type,\r\n        dataType,\r\n        transient: dataPart.transient,\r\n      },\r\n    };\r\n  }\r\n\r\n  // Handle [DONE] message\r\n  if (\r\n    dataPart === \"[DONE]\" ||\r\n    (typeof dataPart === \"string\" && dataPart.trim() === \"[DONE]\")\r\n  ) {\r\n    return {\r\n      id: eventId,\r\n      timestamp,\r\n      type: \"stream-done\",\r\n      data: {\r\n        message: \"[DONE]\",\r\n      },\r\n    };\r\n  }\r\n\r\n  // Message events\r\n  if (\r\n    dataPart.type === \"text\" ||\r\n    (dataPart.type === \"text-delta\" && !dataPart.delta)\r\n  ) {\r\n    return {\r\n      id: eventId,\r\n      timestamp,\r\n      type: \"message-chunk\",\r\n      data: {\r\n        text: dataPart.text || dataPart.textDelta || \"\",\r\n        messageId: dataPart.id,\r\n      },\r\n      metadata: {\r\n        messageId: dataPart.id,\r\n      },\r\n    };\r\n  }\r\n\r\n  // Message start/complete events\r\n  if (dataPart.type === \"message-start\") {\r\n    return {\r\n      id: eventId,\r\n      timestamp,\r\n      type: \"message-start\",\r\n      data: dataPart,\r\n      metadata: {\r\n        messageId: dataPart.id,\r\n      },\r\n    };\r\n  }\r\n\r\n  if (dataPart.type === \"message-complete\" || dataPart.type === \"finish\") {\r\n    return {\r\n      id: eventId,\r\n      timestamp,\r\n      type: \"message-complete\",\r\n      data: dataPart,\r\n      metadata: {\r\n        messageId: dataPart.id,\r\n      },\r\n    };\r\n  }\r\n\r\n  // Error events\r\n  if (dataPart.type === \"error\" || dataPart.error) {\r\n    return {\r\n      id: eventId,\r\n      timestamp,\r\n      type: \"error\",\r\n      data: {\r\n        error: dataPart.error || dataPart.message || \"Unknown error\",\r\n        details: dataPart,\r\n      },\r\n    };\r\n  }\r\n\r\n  // Unknown/generic events - capture everything else\r\n  return {\r\n    id: eventId,\r\n    timestamp,\r\n    type: \"unknown\",\r\n    data: dataPart,\r\n    metadata: {\r\n      originalType: dataPart.type,\r\n      messageId: dataPart.id,\r\n    },\r\n  };\r\n}\r\n\r\n/**\r\n * Extracts tool name from event type like 'tool-call-get-expenses-start'\r\n * Also handles AI SDK stream events with tool names in data\r\n */\r\nfunction extractToolNameFromType(type: string): string {\r\n  // Remove 'tool-call-' prefix and '-start'/'-result'/'error' suffix\r\n  let toolName = type.replace(/^tool-call-/, \"\");\r\n  toolName = toolName.replace(/-(?:start|result|error)$/, \"\");\r\n  return toolName;\r\n}\r\n\r\n/**\r\n * Checks if a data part is a standard AI SDK stream part\r\n */\r\nfunction isAIStreamPart(dataPart: any): boolean {\r\n  const aiStreamTypes = [\r\n    \"text-delta\",\r\n    \"text-done\",\r\n    \"tool-call\",\r\n    \"tool-result\",\r\n    \"data\",\r\n    \"error\",\r\n    \"finish\",\r\n  ];\r\n  return aiStreamTypes.includes(dataPart.type);\r\n}\r\n\r\n/**\r\n * Parses a standard AI SDK stream part\r\n */\r\nfunction parseAIStreamPart(\r\n  dataPart: any,\r\n  eventId: string,\r\n  timestamp: number,\r\n): AIEvent | null {\r\n  switch (dataPart.type) {\r\n    case \"text-delta\":\r\n      return {\r\n        id: eventId,\r\n        timestamp,\r\n        type: \"text-delta\",\r\n        data: dataPart,\r\n        metadata: {\r\n          messageId: dataPart.id,\r\n        },\r\n      };\r\n\r\n    case \"text-done\":\r\n      return {\r\n        id: eventId,\r\n        timestamp,\r\n        type: \"text-end\",\r\n        data: dataPart,\r\n        metadata: {\r\n          messageId: dataPart.id,\r\n        },\r\n      };\r\n\r\n    case \"tool-call\":\r\n      return {\r\n        id: eventId,\r\n        timestamp,\r\n        type: \"tool-call-start\",\r\n        data: dataPart,\r\n        metadata: {\r\n          toolName: dataPart.toolName,\r\n          toolCallId: dataPart.toolCallId,\r\n          toolParams: dataPart.args || {},\r\n        },\r\n      };\r\n\r\n    case \"tool-result\":\r\n      return {\r\n        id: eventId,\r\n        timestamp,\r\n        type: \"tool-call-result\",\r\n        data: dataPart,\r\n        metadata: {\r\n          toolName: dataPart.toolName,\r\n          toolCallId: dataPart.toolCallId,\r\n          duration: dataPart.duration,\r\n        },\r\n      };\r\n\r\n    case \"data\":\r\n      return {\r\n        id: eventId,\r\n        timestamp,\r\n        type: \"custom-data\", // Custom data events\r\n        data: dataPart,\r\n        metadata: {\r\n          originalType: dataPart.type,\r\n        },\r\n      };\r\n\r\n    case \"error\":\r\n      return {\r\n        id: eventId,\r\n        timestamp,\r\n        type: \"error\",\r\n        data: dataPart,\r\n        metadata: {\r\n          originalType: dataPart.type,\r\n        },\r\n      };\r\n\r\n    case \"finish\":\r\n      return {\r\n        id: eventId,\r\n        timestamp,\r\n        type: \"finish\",\r\n        data: dataPart,\r\n        metadata: {\r\n          originalType: dataPart.type,\r\n        },\r\n      };\r\n\r\n    default:\r\n      return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Extracts tool name from AI SDK stream data\r\n */\r\nfunction extractToolNameFromData(dataPart: any): string | null {\r\n  // Check for tool name in various common locations\r\n  if (dataPart.toolName) return dataPart.toolName;\r\n  if (dataPart.name) return dataPart.name;\r\n  if (dataPart.tool) return dataPart.tool;\r\n  if (dataPart.function) return dataPart.function;\r\n\r\n  // Check in nested objects\r\n  if (dataPart.toolCall?.name) return dataPart.toolCall.name;\r\n  if (dataPart.toolCall?.function) return dataPart.toolCall.function;\r\n\r\n  // Check for tool name in args or parameters\r\n  if (dataPart.args?.toolName) return dataPart.args.toolName;\r\n  if (dataPart.parameters?.toolName) return dataPart.parameters.toolName;\r\n  if (dataPart.input?.toolName) return dataPart.input.toolName;\r\n\r\n  // Check for function name in args\r\n  if (dataPart.args?.function) return dataPart.args.function;\r\n  if (dataPart.args?.name) return dataPart.args.name;\r\n\r\n  // Check for tool name in metadata\r\n  if (dataPart.metadata?.toolName) return dataPart.metadata.toolName;\r\n\r\n  return null;\r\n}\r\n\r\n/**\r\n * Formats event data for display\r\n */\r\nexport function formatEventData(event: AIEvent): string {\r\n  try {\r\n    return JSON.stringify(event.data, null, 2);\r\n  } catch {\r\n    return String(event.data);\r\n  }\r\n}\r\n\r\n/**\r\n * Gets a human-readable description of the event\r\n */\r\nexport function getEventDescription(event: AIEvent): string {\r\n  switch (event.type) {\r\n    case \"tool-call-start\": {\r\n      const toolName =\r\n        event.data.toolName || event.metadata?.toolName || \"unknown\";\r\n      const inputDelta = event.data.inputDelta;\r\n      if (inputDelta) {\r\n        return `TOOL INPUT ${toolName} \"${inputDelta}\"`;\r\n      }\r\n      return `TOOL START ${toolName}`;\r\n    }\r\n\r\n    case \"tool-call-result\": {\r\n      const toolName =\r\n        event.data.toolName || event.metadata?.toolName || \"unknown\";\r\n      const duration = event.metadata?.duration\r\n        ? ` (${event.metadata.duration}ms)`\r\n        : \"\";\r\n      const preliminary = event.metadata?.preliminary ? \" [preliminary]\" : \"\";\r\n      return `TOOL DONE ${toolName}${duration}${preliminary}`;\r\n    }\r\n\r\n    case \"tool-call-error\":\r\n      return `TOOL ERROR ${event.metadata?.toolName || event.data.toolName || \"unknown\"}`;\r\n\r\n    case \"message-start\":\r\n      return \"MESSAGE START\";\r\n\r\n    case \"message-chunk\": {\r\n      const textPreview = event.data.text?.substring(0, 30) || \"\";\r\n      return `CHUNK \"${textPreview}${textPreview.length >= 30 ? \"...\" : \"\"}\"`;\r\n    }\r\n\r\n    case \"message-complete\":\r\n      return \"MESSAGE DONE\";\r\n\r\n    case \"start\":\r\n      return \"STREAM START\";\r\n\r\n    case \"reasoning-start\":\r\n      return \"REASONING START\";\r\n\r\n    case \"reasoning-delta\": {\r\n      const deltaPreview = event.data.delta?.substring(0, 20) || \"\";\r\n      return `REASONING \"${deltaPreview}${deltaPreview.length >= 20 ? \"...\" : \"\"}\"`;\r\n    }\r\n\r\n    case \"reasoning-end\":\r\n      return \"REASONING END\";\r\n\r\n    case \"start-step\":\r\n      return \"STEP START\";\r\n\r\n    case \"text-start\":\r\n      return `TEXT START ${event.data.id}`;\r\n\r\n    case \"text-delta\": {\r\n      const deltaPreview = event.data.delta?.substring(0, 20) || \"\";\r\n      return `TEXT \"${deltaPreview}${deltaPreview.length >= 20 ? \"...\" : \"\"}\"`;\r\n    }\r\n\r\n    case \"text-end\":\r\n      return `TEXT END ${event.data.id}`;\r\n\r\n    case \"finish-step\":\r\n      return \"STEP DONE\";\r\n\r\n    case \"finish\": {\r\n      return `STREAM DONE${event.data.reason ? ` (${event.data.reason})` : \"\"}`;\r\n    }\r\n\r\n    case \"stream-done\":\r\n      return \"STREAM [DONE]\";\r\n\r\n    case \"error\":\r\n      return `ERROR ${event.data.error}`;\r\n\r\n    case \"custom-data\": {\r\n      const dataType =\r\n        event.metadata?.dataType || event.data.dataType || \"data\";\r\n      const isTransient = event.metadata?.transient || event.data.transient;\r\n      const transientLabel = isTransient ? \" (transient)\" : \"\";\r\n      return `DATA ${dataType.toUpperCase()}${transientLabel}`;\r\n    }\r\n\r\n    case \"agent-start\":\r\n      return `AGENT START ${event.metadata?.agent || \"unknown\"}`;\r\n\r\n    case \"agent-finish\":\r\n      return `AGENT FINISH ${event.metadata?.agent || \"unknown\"}`;\r\n\r\n    case \"agent-error\":\r\n      return `AGENT ERROR ${event.metadata?.agent || \"unknown\"}`;\r\n\r\n    case \"agent-handoff\":\r\n      return `HANDOFF ${event.metadata?.fromAgent || \"unknown\"}  ${event.metadata?.toAgent || \"unknown\"}`;\r\n\r\n    case \"agent-complete\":\r\n      return `ORCHESTRATION COMPLETE (${event.metadata?.totalRounds || 0} rounds)`;\r\n\r\n    case \"agent-step\":\r\n      return `AGENT STEP ${event.metadata?.agent || \"unknown\"}`;\r\n\r\n    case \"unknown\":\r\n      return `UNKNOWN ${event.metadata?.originalType || \"no type\"}`;\r\n\r\n    default:\r\n      return String(event.type).toUpperCase();\r\n  }\r\n}\r\n","import type { AIEvent } from \"../types\";\r\nimport { createDebugLogger } from \"./debug\";\r\nimport { parseSSEEvent } from \"./event-parser\";\r\n\r\nexport interface StreamInterceptorOptions {\r\n  onEvent: (event: AIEvent) => void;\r\n  endpoints: string[];\r\n  enabled: boolean;\r\n  debug?: boolean;\r\n}\r\n\r\nexport class StreamInterceptor {\r\n  private originalFetch: typeof fetch;\r\n  private options: StreamInterceptorOptions;\r\n  private eventIdCounter = 0;\r\n  private isPatched = false;\r\n  private hasErrors = false; // Safety flag to disable on errors\r\n\r\n  constructor(options: StreamInterceptorOptions) {\r\n    this.originalFetch = window.fetch.bind(window);\r\n    this.options = options;\r\n\r\n    const debugLog = createDebugLogger(options.debug || false);\r\n    debugLog(\"[AI Devtools] StreamInterceptor constructor completed\");\r\n  }\r\n\r\n  private generateEventId(): string {\r\n    return `sse_event_${Date.now()}_${this.eventIdCounter++}`;\r\n  }\r\n\r\n  private shouldInterceptUrl(url: string): boolean {\r\n    // More flexible matching - check if URL contains any of the endpoints\r\n    // or if it's a chat-related endpoint\r\n    const shouldIntercept = this.options.endpoints.some((endpoint) => {\r\n      // Direct match\r\n      if (url.includes(endpoint)) {\r\n        return true;\r\n      }\r\n\r\n      return false;\r\n    });\r\n\r\n    return shouldIntercept;\r\n  }\r\n\r\n  private async interceptStreamResponse(response: Response): Promise<Response> {\r\n    if (!response.body) {\r\n      return response;\r\n    }\r\n\r\n    try {\r\n      const reader = response.body.getReader();\r\n      const decoder = new TextDecoder();\r\n\r\n      // Create a new readable stream that we can intercept\r\n      const stream = new ReadableStream({\r\n        start: (controller) => {\r\n          const pump = async (): Promise<void> => {\r\n            try {\r\n              const { done, value } = await reader.read();\r\n\r\n              if (done) {\r\n                controller.close();\r\n                return;\r\n              }\r\n\r\n              // CRITICAL: Pass the original chunk through FIRST\r\n              // This ensures the original stream is never blocked\r\n              controller.enqueue(value);\r\n\r\n              try {\r\n                const chunk = decoder.decode(value, { stream: true });\r\n                this.parseSSEChunk(chunk);\r\n              } catch (parseError) {\r\n                // Log parsing errors but don't break the stream\r\n              }\r\n\r\n              return pump();\r\n            } catch (error) {\r\n              // Forward stream errors to the original consumer\r\n              controller.error(error);\r\n            }\r\n          };\r\n\r\n          return pump();\r\n        },\r\n      });\r\n\r\n      // Return a new response with our intercepted stream\r\n      // Preserve ALL original response properties\r\n      return new Response(stream, {\r\n        status: response.status,\r\n        statusText: response.statusText,\r\n        headers: new Headers(response.headers), // Clone headers to avoid mutation\r\n      });\r\n    } catch (error) {\r\n      // If anything goes wrong with our interception, return the original response\r\n      return response;\r\n    }\r\n  }\r\n\r\n  private parseSSEChunk(chunk: string): void {\r\n    const debugLog = createDebugLogger(this.options.debug || false);\r\n\r\n    // Split chunk into lines\r\n    const lines = chunk.split(\"\\n\");\r\n    let eventType = \"\";\r\n    let eventData = \"\";\r\n\r\n    for (const line of lines) {\r\n      const trimmedLine = line.trim();\r\n\r\n      if (trimmedLine === \"\") {\r\n        // Empty line indicates end of event\r\n        if (eventData) {\r\n          const event = parseSSEEvent(\r\n            eventData,\r\n            eventType,\r\n            this.generateEventId(),\r\n          );\r\n          if (event) {\r\n            debugLog(\"[AI Devtools] Event parsed successfully:\", event.type);\r\n            this.options.onEvent(event);\r\n          }\r\n        }\r\n        eventType = \"\";\r\n        eventData = \"\";\r\n      } else if (trimmedLine.startsWith(\"event:\")) {\r\n        eventType = trimmedLine.substring(6).trim();\r\n      } else if (trimmedLine.startsWith(\"data:\")) {\r\n        const data = trimmedLine.substring(5).trim();\r\n        eventData += (eventData ? \"\\n\" : \"\") + data;\r\n      }\r\n    }\r\n\r\n    // Handle case where chunk doesn't end with empty line\r\n    if (eventData) {\r\n      const event = parseSSEEvent(eventData, eventType, this.generateEventId());\r\n      if (event) {\r\n        debugLog(\"[AI Devtools] Event parsed successfully:\", event.type);\r\n        this.options.onEvent(event);\r\n      }\r\n    }\r\n  }\r\n\r\n  public patch(): void {\r\n    const debugLog = createDebugLogger(this.options.debug || false);\r\n\r\n    debugLog(\"[AI Devtools] StreamInterceptor.patch() called\");\r\n\r\n    if (this.isPatched || !this.options.enabled) {\r\n      debugLog(\"[AI Devtools] Patch skipped - already patched or not enabled\");\r\n      return;\r\n    }\r\n\r\n    (window.fetch as any) = async (\r\n      input: RequestInfo | URL,\r\n      init?: RequestInit,\r\n    ): Promise<Response> => {\r\n      const url = typeof input === \"string\" ? input : input.toString();\r\n\r\n      // Safety: Skip interception if we've had errors\r\n      if (this.hasErrors) {\r\n        return this.originalFetch(input, init);\r\n      }\r\n\r\n      // Check if this is a request we should intercept\r\n      if (this.shouldInterceptUrl(url)) {\r\n        debugLog(\"[AI Devtools] Intercepting fetch request:\", url);\r\n        try {\r\n          const response = await this.originalFetch(input, init);\r\n\r\n          // Check if this is a streaming response\r\n          const contentType = response.headers.get(\"content-type\");\r\n\r\n          if (\r\n            contentType &&\r\n            (contentType.includes(\"text/event-stream\") ||\r\n              contentType.includes(\"text/plain\"))\r\n          ) {\r\n            // SAFETY: Only intercept if response is successful and has a body\r\n            if (response.ok && response.body) {\r\n              try {\r\n                return await this.interceptStreamResponse(response);\r\n              } catch (interceptError) {\r\n                // If interception fails, disable future interceptions and return original response\r\n                this.hasErrors = true;\r\n                return response;\r\n              }\r\n            } else {\r\n              // Return original response if not successful or no body\r\n              return response;\r\n            }\r\n          } else {\r\n            // Return the original response for non-streaming responses\r\n            return response;\r\n          }\r\n        } catch (error) {\r\n          // Create an error event\r\n          const errorEvent: AIEvent = {\r\n            id: this.generateEventId(),\r\n            timestamp: Date.now(),\r\n            type: \"error\",\r\n            data: {\r\n              error:\r\n                error instanceof Error\r\n                  ? error.message\r\n                  : \"Network request failed\",\r\n              url,\r\n              method: init?.method || \"GET\",\r\n            },\r\n          };\r\n          this.options.onEvent(errorEvent);\r\n          throw error;\r\n        }\r\n      }\r\n\r\n      // For non-intercepted requests, use original fetch\r\n      return this.originalFetch(input, init);\r\n    };\r\n\r\n    this.isPatched = true;\r\n  }\r\n\r\n  public unpatch(): void {\r\n    if (!this.isPatched) {\r\n      return;\r\n    }\r\n\r\n    window.fetch = this.originalFetch;\r\n    this.isPatched = false;\r\n  }\r\n\r\n  public updateOptions(options: Partial<StreamInterceptorOptions>): void {\r\n    this.options = { ...this.options, ...options };\r\n\r\n    if (!this.options.enabled && this.isPatched) {\r\n      this.unpatch();\r\n    } else if (this.options.enabled && !this.isPatched) {\r\n      this.patch();\r\n    }\r\n  }\r\n\r\n  public isActive(): boolean {\r\n    return this.isPatched;\r\n  }\r\n}\r\n","\"use client\";\r\n\r\nimport { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport type {\r\n  AIEvent,\r\n  AIEventType,\r\n  UseAIDevtoolsOptions,\r\n  UseAIDevtoolsReturn,\r\n} from \"../types\";\r\nimport { createDebugLogger } from \"../utils/debug\";\r\nimport { StreamInterceptor } from \"../utils/stream-interceptor\";\r\n\r\nexport function useAIDevtools(\r\n  options: UseAIDevtoolsOptions = {},\r\n): UseAIDevtoolsReturn {\r\n  const {\r\n    enabled = true,\r\n    maxEvents = 1000,\r\n    onEvent,\r\n    debug = false,\r\n    streamCapture,\r\n    throttle,\r\n  } = options;\r\n\r\n  const [events, setEvents] = useState<AIEvent[]>([]);\r\n  const [isCapturing, setIsCapturing] = useState(true); // Always start capturing by default\r\n  const streamInterceptor = useRef<StreamInterceptor | null>(null);\r\n\r\n  const debugLog = createDebugLogger(debug);\r\n\r\n  // Throttling state\r\n  const throttleQueue = useRef<AIEvent[]>([]);\r\n  const throttleTimer = useRef<ReturnType<typeof setTimeout> | null>(null);\r\n  const lastEventTimes = useRef<Map<string, number>>(new Map());\r\n\r\n  // Check if event should be throttled\r\n  const shouldThrottleEvent = useCallback(\r\n    (event: AIEvent): boolean => {\r\n      if (!throttle?.enabled) return false;\r\n\r\n      const { includeTypes, excludeTypes } = throttle;\r\n\r\n      // If includeTypes is specified, only throttle those types\r\n      if (includeTypes && includeTypes.length > 0) {\r\n        return includeTypes.includes(event.type);\r\n      }\r\n\r\n      // If excludeTypes is specified, don't throttle those types\r\n      if (excludeTypes && excludeTypes.length > 0) {\r\n        return !excludeTypes.includes(event.type);\r\n      }\r\n\r\n      // Default: throttle all events\r\n      return true;\r\n    },\r\n    [throttle],\r\n  );\r\n\r\n  // Process throttled events\r\n  const processThrottledEvents = useCallback(() => {\r\n    if (throttleQueue.current.length === 0) return;\r\n\r\n    const eventsToProcess = [...throttleQueue.current];\r\n    throttleQueue.current = [];\r\n\r\n    setEvents((prev) => {\r\n      const newEvents = [...prev, ...eventsToProcess];\r\n      // Keep only the most recent events\r\n      if (newEvents.length > maxEvents) {\r\n        return newEvents.slice(-maxEvents);\r\n      }\r\n      return newEvents;\r\n    });\r\n\r\n    // Call the optional event handler for each event\r\n    for (const event of eventsToProcess) {\r\n      onEvent?.(event);\r\n    }\r\n  }, [maxEvents, onEvent]);\r\n\r\n  // Add event to the list (with throttling)\r\n  const addEvent = useCallback(\r\n    (event: AIEvent) => {\r\n      debugLog(false, \"[AI Devtools] addEvent called:\", event.type); // Only log event type, not full event\r\n\r\n      if (!isCapturing) {\r\n        debugLog(false, \"[AI Devtools] addEvent skipped - not capturing\");\r\n        return;\r\n      }\r\n\r\n      // Check if this event should be throttled\r\n      if (shouldThrottleEvent(event)) {\r\n        const throttleKey = `${event.type}_${event.metadata?.messageId || \"global\"}`;\r\n        const now = Date.now();\r\n        const lastTime = lastEventTimes.current.get(throttleKey) || 0;\r\n        const interval = throttle?.interval || 100;\r\n\r\n        if (now - lastTime < interval) {\r\n          // Add to throttle queue\r\n          throttleQueue.current.push(event);\r\n\r\n          debugLog(false, \"[AI Devtools] Event throttled:\", event.type);\r\n\r\n          // Set up timer if not already running\r\n          if (!throttleTimer.current) {\r\n            throttleTimer.current = setTimeout(() => {\r\n              processThrottledEvents();\r\n              throttleTimer.current = null;\r\n            }, interval);\r\n          }\r\n          return;\r\n        }\r\n\r\n        // Update last event time\r\n        lastEventTimes.current.set(throttleKey, now);\r\n      }\r\n\r\n      debugLog(false, \"[AI Devtools] Adding event:\", event.type); // Only log essential info\r\n\r\n      setEvents((prev) => {\r\n        const newEvents = [...prev, event];\r\n        // Keep only the most recent events\r\n        if (newEvents.length > maxEvents) {\r\n          return newEvents.slice(-maxEvents);\r\n        }\r\n\r\n        debugLog(false, \"[AI Devtools] Events updated:\", newEvents.length); // Only log count\r\n\r\n        return newEvents;\r\n      });\r\n\r\n      // Call the optional event handler\r\n      onEvent?.(event);\r\n    },\r\n    [\r\n      isCapturing,\r\n      maxEvents,\r\n      onEvent,\r\n      shouldThrottleEvent,\r\n      throttle,\r\n      processThrottledEvents,\r\n    ],\r\n  );\r\n\r\n  // Clear all events\r\n  const clearEvents = useCallback(() => {\r\n    setEvents([]);\r\n  }, []);\r\n\r\n  // Toggle capturing\r\n  const toggleCapturing = useCallback(() => {\r\n    setIsCapturing((prev: boolean) => {\r\n      const newCapturing = !prev;\r\n\r\n      // Update stream interceptor if it exists\r\n      if (streamInterceptor.current) {\r\n        streamInterceptor.current.updateOptions({ enabled: newCapturing });\r\n      }\r\n\r\n      return newCapturing;\r\n    });\r\n  }, []);\r\n\r\n  // Filter events\r\n  const filterEvents = useCallback(\r\n    (\r\n      filterTypes?: AIEventType[],\r\n      searchQuery?: string,\r\n      toolNames?: string[],\r\n    ) => {\r\n      return events.filter((event) => {\r\n        // Filter by type\r\n        if (\r\n          filterTypes &&\r\n          filterTypes.length > 0 &&\r\n          !filterTypes.includes(event.type)\r\n        ) {\r\n          return false;\r\n        }\r\n\r\n        // Filter by tool name\r\n        if (toolNames && toolNames.length > 0) {\r\n          const eventToolName = event.metadata?.toolName;\r\n          if (!eventToolName || !toolNames.includes(eventToolName)) {\r\n            return false;\r\n          }\r\n        }\r\n\r\n        // Filter by search query\r\n        if (searchQuery?.trim()) {\r\n          const query = searchQuery.toLowerCase().trim();\r\n          const eventData = JSON.stringify(event.data).toLowerCase();\r\n          const eventMetadata = JSON.stringify(\r\n            event.metadata || {},\r\n          ).toLowerCase();\r\n\r\n          if (!eventData.includes(query) && !eventMetadata.includes(query)) {\r\n            return false;\r\n          }\r\n        }\r\n\r\n        return true;\r\n      });\r\n    },\r\n    [events],\r\n  );\r\n\r\n  // Get unique tool names from events\r\n  const getUniqueToolNames = useCallback(() => {\r\n    const toolNames = new Set<string>();\r\n    for (const event of events) {\r\n      if (event.metadata?.toolName) {\r\n        toolNames.add(event.metadata.toolName);\r\n      }\r\n    }\r\n    return Array.from(toolNames).sort();\r\n  }, [events]);\r\n\r\n  // Get event statistics\r\n  const getEventStats = useCallback(() => {\r\n    const stats = {\r\n      total: events.length,\r\n      byType: {} as Record<AIEventType, number>,\r\n      byTool: {} as Record<string, number>,\r\n      timeRange:\r\n        events.length > 0\r\n          ? {\r\n              start: Math.min(...events.map((e) => e.timestamp)),\r\n              end: Math.max(...events.map((e) => e.timestamp)),\r\n            }\r\n          : null,\r\n    };\r\n\r\n    for (const event of events) {\r\n      // Count by type\r\n      stats.byType[event.type] = (stats.byType[event.type] || 0) + 1;\r\n\r\n      // Count by tool\r\n      if (event.metadata?.toolName) {\r\n        const toolName = event.metadata.toolName;\r\n        stats.byTool[toolName] = (stats.byTool[toolName] || 0) + 1;\r\n      }\r\n    }\r\n\r\n    return stats;\r\n  }, [events]);\r\n\r\n  // Initialize and manage stream interceptor\r\n  useEffect(() => {\r\n    const streamConfig = streamCapture || {\r\n      enabled,\r\n      endpoints: [\"/api/chat\"], // Exact match for most common endpoint\r\n      autoConnect: true, // Always auto-connect by default\r\n    };\r\n\r\n    debugLog(\"[AI Devtools] Stream interceptor effect running\", {\r\n      enabled: streamConfig.enabled,\r\n      autoConnect: streamConfig.autoConnect,\r\n      endpoints: streamConfig.endpoints,\r\n      isCapturing,\r\n    });\r\n\r\n    if (streamConfig.enabled && streamConfig.autoConnect) {\r\n      debugLog(\"[AI Devtools] Creating stream interceptor...\");\r\n\r\n      // Create a wrapper function to ensure we're using the latest addEvent\r\n      const eventHandler = (event: AIEvent) => {\r\n        debugLog(\"[AI Devtools] Event captured:\", {\r\n          type: event.type,\r\n          timestamp: event.timestamp,\r\n          hasData: !!event.data,\r\n        });\r\n        addEvent(event);\r\n      };\r\n\r\n      // Initialize stream interceptor\r\n      streamInterceptor.current = new StreamInterceptor({\r\n        onEvent: eventHandler,\r\n        endpoints: streamConfig.endpoints || [\"/api/chat\"],\r\n        enabled: isCapturing,\r\n        debug,\r\n      });\r\n\r\n      debugLog(\"[AI Devtools] Stream interceptor created, patching fetch...\");\r\n\r\n      // Start intercepting\r\n      streamInterceptor.current.patch();\r\n\r\n      debugLog(\"[AI Devtools] Fetch patched successfully\");\r\n\r\n      // Cleanup on unmount\r\n      return () => {\r\n        debugLog(\"[AI Devtools] Cleaning up stream interceptor\");\r\n        if (streamInterceptor.current) {\r\n          streamInterceptor.current.unpatch();\r\n          streamInterceptor.current = null;\r\n        }\r\n\r\n        // Cleanup throttle timer\r\n        if (throttleTimer.current) {\r\n          clearTimeout(throttleTimer.current);\r\n          throttleTimer.current = null;\r\n        }\r\n      };\r\n    }\r\n  }, [addEvent, isCapturing, streamCapture, enabled]);\r\n\r\n  return {\r\n    events,\r\n    isCapturing,\r\n    clearEvents,\r\n    toggleCapturing,\r\n    filterEvents,\r\n    getUniqueToolNames,\r\n    getEventStats,\r\n  };\r\n}\r\n","\"use client\";\r\n\r\ninterface DevtoolsButtonProps {\r\n  onToggle: () => void;\r\n  eventCount: number;\r\n  hasNewEvents: boolean;\r\n  className?: string;\r\n}\r\n\r\nexport function DevtoolsButton({\r\n  onToggle,\r\n  eventCount,\r\n  hasNewEvents,\r\n  className = \"\",\r\n}: DevtoolsButtonProps) {\r\n  return (\r\n    <button\r\n      type=\"button\"\r\n      onClick={onToggle}\r\n      className={`ai-devtools-button ${hasNewEvents ? \"receiving-events\" : \"\"} ${className}`}\r\n      title={`ai-devtools [${eventCount}]`}\r\n    >\r\n      {/* AI SDK Tools Logo */}\r\n      <svg\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        width=\"20\"\r\n        height=\"20\"\r\n        fill=\"none\"\r\n        viewBox=\"0 0 95 83\"\r\n        className=\"ai-devtools-button-icon\"\r\n      >\r\n        <title>AI SDK Tools Logo</title>\r\n        <path fill=\"url(#a)\" d=\"m22 .5 16 52L31 83H0L22 .5Z\" />\r\n        <path fill=\"#D9D9D9\" d=\"M62 .5H30l13 41.25L56 83h31L62 .5Z\" />\r\n        <defs>\r\n          <linearGradient\r\n            id=\"a\"\r\n            x1={21.5}\r\n            x2={21.5}\r\n            y1={0.5}\r\n            y2={83}\r\n            gradientUnits=\"userSpaceOnUse\"\r\n          >\r\n            <stop stopColor=\"#737373\" />\r\n            <stop offset={1} stopColor=\"#D9D9D9\" />\r\n          </linearGradient>\r\n        </defs>\r\n      </svg>\r\n    </button>\r\n  );\r\n}\r\n","\"use client\";\r\n\r\nimport React, {\r\n  useCallback,\r\n  useContext,\r\n  useEffect,\r\n  useRef,\r\n  useState,\r\n} from \"react\";\r\n\r\n// Type for the store API - we'll use any to avoid complex type issues\r\ntype StoreApi = any;\r\n\r\n// Import the store context directly - this will be resolved by the bundler\r\n// The bundler will handle the optional dependency resolution\r\nimport { ChatStoreContext as ImportedChatStoreContext } from \"@ai-sdk-tools/store\";\r\n\r\n// Use the imported context\r\nconst ChatStoreContext = ImportedChatStoreContext;\r\n\r\nexport interface UseCurrentStateOptions {\r\n  enabled?: boolean;\r\n}\r\n\r\nexport interface UseCurrentStateReturn {\r\n  isStoreAvailable: boolean;\r\n  availableStoreIds: string[];\r\n  currentStates: Record<string, unknown>;\r\n  refreshStates: () => void;\r\n}\r\n\r\n// Remove unused dummy context\r\n\r\nexport function useCurrentState(\r\n  options: UseCurrentStateOptions = {},\r\n): UseCurrentStateReturn {\r\n  const { enabled = true } = options;\r\n\r\n  const [currentStates, setCurrentStates] = useState<Record<string, unknown>>(\r\n    {},\r\n  );\r\n\r\n  const unsubscribeRef = useRef<(() => void) | null>(null);\r\n\r\n  // Create a dummy context for when store is not available\r\n  const DummyContext = useRef(\r\n    React.createContext<StoreApi | undefined>(undefined),\r\n  ).current;\r\n\r\n  // Use the store context if available, otherwise use dummy\r\n  const contextToUse = ChatStoreContext || DummyContext;\r\n  const storeApi: StoreApi | undefined = useContext(contextToUse);\r\n\r\n  const isStoreAvailable = storeApi !== undefined && storeApi !== null;\r\n  const availableStoreIds = isStoreAvailable ? [\"default\"] : [];\r\n\r\n  // Refresh states function\r\n  const refreshStates = useCallback(() => {\r\n    if (!storeApi || !isStoreAvailable) return;\r\n\r\n    try {\r\n      const state = storeApi.getState();\r\n      setCurrentStates({\r\n        default: state,\r\n      });\r\n    } catch {\r\n      // Failed to get state\r\n    }\r\n  }, [storeApi, isStoreAvailable]);\r\n\r\n  // Subscribe to store changes\r\n  useEffect(() => {\r\n    if (!enabled || !storeApi || !isStoreAvailable) return;\r\n\r\n    try {\r\n      // Subscribe to the Zustand store\r\n      const unsubscribe = storeApi.subscribe((newState: unknown) => {\r\n        setCurrentStates({\r\n          default: newState,\r\n        });\r\n      });\r\n\r\n      // Initial state sync\r\n      refreshStates();\r\n\r\n      unsubscribeRef.current = unsubscribe;\r\n\r\n      return () => {\r\n        if (unsubscribeRef.current) {\r\n          unsubscribeRef.current();\r\n          unsubscribeRef.current = null;\r\n        }\r\n      };\r\n    } catch {\r\n      // Failed to subscribe\r\n      return undefined;\r\n    }\r\n  }, [enabled, storeApi, isStoreAvailable, refreshStates]);\r\n\r\n  return {\r\n    isStoreAvailable,\r\n    availableStoreIds,\r\n    currentStates,\r\n    refreshStates,\r\n  };\r\n}\r\n","import {\r\n  Api as ApiIcon,\r\n  Build as BuildIcon,\r\n  CheckCircle as CheckCircleIcon,\r\n  Circle as CircleIcon,\r\n  Code as CodeIcon,\r\n  DataObject as DataObjectIcon,\r\n  ErrorOutline as ErrorOutlineIcon,\r\n  Help as HelpIcon,\r\n  Psychology as PsychologyIcon,\r\n  Send as SendIcon,\r\n  Settings as SettingsIcon,\r\n} from \"@mui/icons-material\";\r\nimport type React from \"react\";\r\n\r\n/**\r\n * Formats a timestamp to a readable time string\r\n */\r\nexport function formatTimestamp(timestamp: number): string {\r\n  const date = new Date(timestamp);\r\n  return (\r\n    date.toLocaleTimeString(\"en-US\", {\r\n      hour12: false,\r\n      hour: \"2-digit\",\r\n      minute: \"2-digit\",\r\n      second: \"2-digit\",\r\n    }) + `.${date.getMilliseconds().toString().padStart(3, \"0\")}`\r\n  );\r\n}\r\n\r\n/**\r\n * Gets a color for an event type\r\n */\r\nexport function getEventTypeColor(type: string): string {\r\n  const colors: Record<string, string> = {\r\n    \"tool-call-start\": \"#888888\", // medium gray\r\n    \"tool-call-result\": \"#00ff00\", // green for success (like 200 status)\r\n    \"tool-call-error\": \"#ff0000\", // red for errors\r\n    \"message-start\": \"#ffffff\", // white\r\n    \"message-chunk\": \"#888888\", // medium gray\r\n    \"message-complete\": \"#00ff00\", // green for completion\r\n    \"text-start\": \"#ffffff\", // white\r\n    \"text-delta\": \"#888888\", // medium gray\r\n    \"text-end\": \"#ffffff\", // white\r\n    \"reasoning-start\": \"#9c27b0\", // purple for reasoning\r\n    \"reasoning-delta\": \"#888888\", // medium gray (same as text-delta)\r\n    \"reasoning-end\": \"#9c27b0\", // purple for reasoning\r\n    \"start\": \"#87ceeb\", // light blue\r\n    \"start-step\": \"#888888\", // medium gray\r\n    \"finish-step\": \"#00ff00\", // green for success\r\n    finish: \"#00ff00\", // green for success\r\n    \"stream-done\": \"#00ff00\", // green for success\r\n    error: \"#ff0000\", // red for errors\r\n    unknown: \"#888888\", // medium gray\r\n  };\r\n\r\n  return colors[type] || \"#888888\";\r\n}\r\n\r\n/**\r\n * Gets an icon for an event type (using better Material-UI icons)\r\n */\r\nexport function getEventTypeIcon(type: string): React.ReactElement {\r\n  const icons: Record<string, React.ReactElement> = {\r\n    // Tool calls - using Build/Settings icons for better semantic meaning\r\n    \"tool-call-start\": <BuildIcon sx={{ fontSize: \"0.75rem\" }} />,\r\n    \"tool-call-result\": <CheckCircleIcon sx={{ fontSize: \"0.75rem\" }} />,\r\n    \"tool-call-error\": <ErrorOutlineIcon sx={{ fontSize: \"0.75rem\" }} />,\r\n\r\n    // Messages - using Send/Message icons\r\n    \"message-start\": <SendIcon sx={{ fontSize: \"0.75rem\" }} />,\r\n    \"message-chunk\": <CircleIcon sx={{ fontSize: \"0.4rem\" }} />,\r\n    \"message-complete\": <CheckCircleIcon sx={{ fontSize: \"0.75rem\" }} />,\r\n\r\n    // Text events - using Code/TextFields icons\r\n    \"text-start\": <CodeIcon sx={{ fontSize: \"0.75rem\" }} />,\r\n    \"text-delta\": <CircleIcon sx={{ fontSize: \"0.4rem\" }} />,\r\n    \"text-end\": <CodeIcon sx={{ fontSize: \"0.75rem\" }} />,\r\n\r\n    // Reasoning events - using Psychology icon\r\n    \"reasoning-start\": <PsychologyIcon sx={{ fontSize: \"0.75rem\" }} />,\r\n    \"reasoning-delta\": <CircleIcon sx={{ fontSize: \"0.4rem\" }} />,\r\n    \"reasoning-end\": <PsychologyIcon sx={{ fontSize: \"0.75rem\" }} />,\r\n\r\n    // Steps - using Settings/PlayArrow for process steps\r\n    \"start-step\": <SettingsIcon sx={{ fontSize: \"0.75rem\" }} />,\r\n    \"finish-step\": <CheckCircleIcon sx={{ fontSize: \"0.75rem\" }} />,\r\n\r\n    // Stream events - using Api/Done icons\r\n    \"start\": <ApiIcon sx={{ fontSize: \"0.75rem\" }} />,\r\n    finish: <ApiIcon sx={{ fontSize: \"0.75rem\" }} />,\r\n    \"stream-done\": <ApiIcon sx={{ fontSize: \"0.75rem\" }} />,\r\n\r\n    // Error and data events\r\n    error: <ErrorOutlineIcon sx={{ fontSize: \"0.75rem\" }} />,\r\n    \"custom-data\": <DataObjectIcon sx={{ fontSize: \"0.75rem\" }} />,\r\n    unknown: <HelpIcon sx={{ fontSize: \"0.75rem\" }} />,\r\n  };\r\n\r\n  return icons[type] || <HelpIcon sx={{ fontSize: \"0.75rem\" }} />;\r\n}\r\n\r\n/**\r\n * Formats a tool name from camelCase/snake_case to readable format\r\n * Examples: getBurnRate -> Get Burn Rate, get_user_data -> Get User Data\r\n */\r\nexport function formatToolName(toolName: string): string {\r\n  if (!toolName || toolName === \"unknown\") return toolName;\r\n\r\n  // Handle snake_case by replacing underscores with spaces\r\n  let formatted = toolName.replace(/_/g, \" \");\r\n\r\n  // Handle camelCase by adding spaces before capital letters\r\n  formatted = formatted.replace(/([a-z])([A-Z])/g, \"$1 $2\");\r\n\r\n  // Capitalize the first letter of each word\r\n  formatted = formatted\r\n    .split(\" \")\r\n    .map((word) => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase())\r\n    .join(\" \");\r\n\r\n  return formatted;\r\n}\r\n","import type { AIEvent, ToolCallSession } from \"../types\";\r\n\r\n/**\r\n * Extracts tool name from an event, trying multiple sources\r\n */\r\nfunction extractToolNameFromEvent(event: AIEvent): string {\r\n  // Try metadata first\r\n  if (event.metadata?.toolName) return event.metadata.toolName;\r\n\r\n  // Try data object\r\n  if (event.data?.toolName) return event.data.toolName;\r\n\r\n  // Try other common locations in data\r\n  if (event.data?.name) return event.data.name;\r\n  if (event.data?.tool) return event.data.tool;\r\n  if (event.data?.function) return event.data.function;\r\n\r\n  // Try nested objects\r\n  if (event.data?.toolCall?.name) return event.data.toolCall.name;\r\n  if (event.data?.toolCall?.function) return event.data.toolCall.function;\r\n\r\n  // Try args\r\n  if (event.data?.args?.toolName) return event.data.args.toolName;\r\n  if (event.data?.args?.function) return event.data.args.function;\r\n  if (event.data?.args?.name) return event.data.args.name;\r\n\r\n  // For tool-input-delta events, we can't extract tool name from the event itself\r\n  // This will be handled by the session context logic\r\n  return \"unknown\";\r\n}\r\n\r\n/**\r\n * Groups events into tool call sessions for better debugging experience\r\n */\r\nexport function groupEventsIntoSessions(events: AIEvent[]): {\r\n  sessions: ToolCallSession[];\r\n  standaloneEvents: AIEvent[];\r\n} {\r\n  const sessions: ToolCallSession[] = [];\r\n  const standaloneEvents: AIEvent[] = [];\r\n  const activeSessions = new Map<string, ToolCallSession>();\r\n  let sessionCounter = 0;\r\n\r\n  for (const event of events) {\r\n    // Check if this event belongs to a tool call session\r\n    const toolCallId = event.metadata?.toolCallId;\r\n    let toolName = extractToolNameFromEvent(event);\r\n\r\n    if (toolCallId) {\r\n      // This event belongs to a tool call session\r\n      if (!activeSessions.has(toolCallId)) {\r\n        // Start a new session with a unique ID that combines toolCallId and counter\r\n        const uniqueSessionId = `${toolCallId}_${sessionCounter++}`;\r\n        const session: ToolCallSession = {\r\n          id: uniqueSessionId,\r\n          toolName,\r\n          toolCallId,\r\n          startTime: event.timestamp,\r\n          status: \"running\",\r\n          events: [event],\r\n          startEvent: event,\r\n        };\r\n        activeSessions.set(toolCallId, session);\r\n      } else {\r\n        // Add to existing session\r\n        const session = activeSessions.get(toolCallId)!;\r\n\r\n        // If this event doesn't have a tool name but the session does, use the session's tool name\r\n        if (toolName === \"unknown\" && session.toolName !== \"unknown\") {\r\n          toolName = session.toolName;\r\n          // Update the event's metadata to include the tool name for consistency\r\n          if (!event.metadata) {\r\n            event.metadata = {};\r\n          }\r\n          event.metadata.toolName = toolName;\r\n          if (!event.data) {\r\n            event.data = {};\r\n          }\r\n          event.data.toolName = toolName;\r\n        }\r\n\r\n        // Also update the event's tool name in the data object for display purposes\r\n        if (toolName !== \"unknown\") {\r\n          if (!event.data) {\r\n            event.data = {};\r\n          }\r\n          event.data.toolName = toolName;\r\n          if (!event.metadata) {\r\n            event.metadata = {};\r\n          }\r\n          event.metadata.toolName = toolName;\r\n        }\r\n\r\n        // If this event has a better tool name than the session, update the session\r\n        if (toolName !== \"unknown\" && session.toolName === \"unknown\") {\r\n          session.toolName = toolName;\r\n        }\r\n\r\n        session.events.push(event);\r\n\r\n        // Check if this is an end event\r\n        if (\r\n          event.type === \"tool-call-result\" ||\r\n          event.type === \"tool-call-error\"\r\n        ) {\r\n          // Ensure the final event has the correct tool name\r\n          if (session.toolName !== \"unknown\") {\r\n            if (!event.metadata) {\r\n              event.metadata = {};\r\n            }\r\n            event.metadata.toolName = session.toolName;\r\n            if (!event.data) {\r\n              event.data = {};\r\n            }\r\n            event.data.toolName = session.toolName;\r\n          }\r\n\r\n          // Only complete the session if this is not a preliminary result\r\n          // or if it's an error (errors should always complete the session)\r\n          const isPreliminary = event.metadata?.preliminary === true;\r\n          const shouldComplete =\r\n            event.type === \"tool-call-error\" || !isPreliminary;\r\n\r\n          if (shouldComplete) {\r\n            session.endTime = event.timestamp;\r\n            session.duration = event.timestamp - session.startTime;\r\n            session.status = \"completed\";\r\n            session.endEvent = event;\r\n\r\n            // Move to completed sessions\r\n            sessions.push(session);\r\n            activeSessions.delete(toolCallId);\r\n          }\r\n        }\r\n      }\r\n    } else if (isToolCallStartEvent(event)) {\r\n      // Tool call start without toolCallId - create standalone session\r\n      const toolName = extractToolNameFromEvent(event);\r\n      const sessionId = `standalone_${event.timestamp}_${sessionCounter++}_${toolName}`;\r\n      const session: ToolCallSession = {\r\n        id: sessionId,\r\n        toolName,\r\n        startTime: event.timestamp,\r\n        status: \"running\",\r\n        events: [event],\r\n        startEvent: event,\r\n      };\r\n      activeSessions.set(sessionId, session);\r\n    } else {\r\n      // This is a standalone event (not part of a tool call)\r\n      standaloneEvents.push(event);\r\n    }\r\n  }\r\n\r\n  // Add any remaining active sessions\r\n  for (const session of activeSessions.values()) {\r\n    sessions.push(session);\r\n  }\r\n\r\n  // Sort sessions by start time\r\n  sessions.sort((a, b) => a.startTime - b.startTime);\r\n\r\n  return { sessions, standaloneEvents };\r\n}\r\n\r\n/**\r\n * Checks if an event is a tool call start event\r\n */\r\nfunction isToolCallStartEvent(event: AIEvent): boolean {\r\n  return (\r\n    event.type === \"tool-call-start\" ||\r\n    (event.type === \"unknown\" &&\r\n      event.metadata?.originalType === \"tool-input-start\") ||\r\n    (event.type === \"unknown\" &&\r\n      event.metadata?.originalType === \"tool-input-available\" &&\r\n      !!event.metadata?.toolName)\r\n  );\r\n}\r\n\r\n/**\r\n * Gets a summary of a tool call session\r\n */\r\nexport function getSessionSummary(session: ToolCallSession): string {\r\n  const duration = session.duration ? `${session.duration}ms` : \"running\";\r\n  const eventCount = session.events.length;\r\n  return `${session.toolName} (${eventCount} events, ${duration})`;\r\n}\r\n\r\n/**\r\n * Gets the status color for a tool call session\r\n */\r\nexport function getSessionStatusColor(session: ToolCallSession): string {\r\n  switch (session.status) {\r\n    case \"running\":\r\n      return \"#888888\"; // Gray\r\n    case \"completed\":\r\n      return \"#00ff00\"; // Green\r\n    case \"error\":\r\n      return \"#ff0000\"; // Red\r\n    default:\r\n      return \"#888888\";\r\n  }\r\n}\r\n\r\n/**\r\n * Gets the status icon for a tool call session\r\n */\r\nexport function getSessionStatusIcon(session: ToolCallSession): string {\r\n  switch (session.status) {\r\n    case \"running\":\r\n      return \"\";\r\n    case \"completed\":\r\n      return \"\";\r\n    case \"error\":\r\n      return \"\";\r\n    default:\r\n      return \"?\";\r\n  }\r\n}\r\n","\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport type { AIEvent } from \"../types\";\r\nimport { formatEventData, getEventDescription } from \"../utils/event-parser\";\r\nimport { formatTimestamp, getEventTypeIcon } from \"../utils/formatting\";\r\n\r\ninterface EventItemProps {\r\n  event: AIEvent;\r\n  className?: string;\r\n}\r\n\r\nexport function EventItem({ event, className = \"\" }: EventItemProps) {\r\n  const [isExpanded, setIsExpanded] = useState(false);\r\n\r\n  const typeIcon = getEventTypeIcon(event.type);\r\n  const description = getEventDescription(event);\r\n\r\n  return (\r\n    <div\r\n      className={`ai-devtools-event-item ${className}`}\r\n      data-type={event.type}\r\n    >\r\n      {/* Event header */}\r\n      <div\r\n        className=\"ai-devtools-event-header\"\r\n        onClick={() => setIsExpanded(!isExpanded)}\r\n      >\r\n        <div className=\"ai-devtools-event-content\">\r\n          {/* Event type indicator */}\r\n          <div className=\"ai-devtools-event-indicator\" title={event.type} />\r\n\r\n          {/* Event icon */}\r\n          <span className=\"ai-devtools-event-icon\">{typeIcon}</span>\r\n\r\n          {/* Event description */}\r\n          <div className=\"ai-devtools-event-description\">\r\n            <div className=\"ai-devtools-event-text\">{description}</div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Timestamp */}\r\n        <div className=\"ai-devtools-event-timestamp\">\r\n          {formatTimestamp(event.timestamp)}\r\n        </div>\r\n\r\n        {/* Expand/collapse icon */}\r\n        <div className=\"ai-devtools-event-expand\">\r\n          <svg\r\n            className={`ai-devtools-event-arrow ${\r\n              isExpanded ? \"ai-devtools-event-arrow-expanded\" : \"\"\r\n            }`}\r\n            fill=\"none\"\r\n            stroke=\"currentColor\"\r\n            viewBox=\"0 0 24 24\"\r\n          >\r\n            <path\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              strokeWidth={2}\r\n              d=\"M19 9l-7 7-7-7\"\r\n            />\r\n          </svg>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Expanded content */}\r\n      {isExpanded && (\r\n        <div className=\"ai-devtools-event-expanded\">\r\n          <div className=\"ai-devtools-event-details\">\r\n            {/* Event metadata */}\r\n            <div className=\"ai-devtools-event-metadata\">\r\n              <div className=\"ai-devtools-event-metadata-title\">\r\n                Event Details\r\n              </div>\r\n              <div className=\"ai-devtools-event-metadata-grid\">\r\n                <div className=\"ai-devtools-event-metadata-item\">\r\n                  <span className=\"ai-devtools-event-metadata-label\">ID:</span>{\" \"}\r\n                  {event.id}\r\n                </div>\r\n                <div className=\"ai-devtools-event-metadata-item\">\r\n                  <span className=\"ai-devtools-event-metadata-label\">\r\n                    Type:\r\n                  </span>{\" \"}\r\n                  {event.type}\r\n                </div>\r\n                <div className=\"ai-devtools-event-metadata-item\">\r\n                  <span className=\"ai-devtools-event-metadata-label\">\r\n                    Timestamp:\r\n                  </span>{\" \"}\r\n                  {new Date(event.timestamp).toISOString()}\r\n                </div>\r\n                {event.metadata?.messageId && (\r\n                  <div className=\"ai-devtools-event-metadata-item\">\r\n                    <span className=\"ai-devtools-event-metadata-label\">\r\n                      Message ID:\r\n                    </span>{\" \"}\r\n                    {event.metadata.messageId}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Event data */}\r\n            <div>\r\n              <div className=\"ai-devtools-event-data-title\">Data</div>\r\n              <pre className=\"ai-devtools-event-data-content\">\r\n                {formatEventData(event)}\r\n              </pre>\r\n            </div>\r\n\r\n            {/* Metadata */}\r\n            {event.metadata && Object.keys(event.metadata).length > 0 && (\r\n              <div className=\"ai-devtools-event-metadata-section\">\r\n                <div className=\"ai-devtools-event-metadata-title\">Metadata</div>\r\n                <pre className=\"ai-devtools-event-metadata-content\">\r\n                  {JSON.stringify(event.metadata, null, 2)}\r\n                </pre>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","\"use client\";\r\n\r\nimport type React from \"react\";\r\nimport { useState } from \"react\";\r\nimport type { ToolCallSession } from \"../types\";\r\nimport { formatTimestamp, formatToolName } from \"../utils/formatting\";\r\nimport {\r\n  getSessionStatusColor,\r\n  getSessionStatusIcon,\r\n  getSessionSummary,\r\n} from \"../utils/session-grouper\";\r\nimport { EventItem } from \"./event-item\";\r\n\r\n// Simple tooltip component\r\nfunction Tooltip({\r\n  children,\r\n  content,\r\n  show,\r\n}: {\r\n  children: React.ReactNode;\r\n  content: React.ReactNode;\r\n  show: boolean;\r\n}) {\r\n  if (!show) return <>{children}</>;\r\n\r\n  return (\r\n    <div className=\"ai-devtools-tooltip-container\">\r\n      {children}\r\n      <div className=\"ai-devtools-tooltip\">{content}</div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Format tool parameters for display\r\nfunction formatToolParams(toolParams: Record<string, any> | undefined): string {\r\n  if (!toolParams || Object.keys(toolParams).length === 0) {\r\n    return \"No parameters\";\r\n  }\r\n\r\n  return Object.entries(toolParams)\r\n    .map(([key, value]) => {\r\n      const formattedValue =\r\n        typeof value === \"object\"\r\n          ? JSON.stringify(value, null, 2)\r\n          : String(value);\r\n      return `${key}: ${formattedValue}`;\r\n    })\r\n    .join(\"\\n\");\r\n}\r\n\r\ninterface ToolCallSessionProps {\r\n  session: ToolCallSession;\r\n  className?: string;\r\n}\r\n\r\nexport function ToolCallSessionComponent({\r\n  session,\r\n  className = \"\",\r\n}: ToolCallSessionProps) {\r\n  const [isExpanded, setIsExpanded] = useState(false);\r\n  const [showTooltip, setShowTooltip] = useState(false);\r\n\r\n  const summary = getSessionSummary(session);\r\n  const statusColor = getSessionStatusColor(session);\r\n  const statusIcon = getSessionStatusIcon(session);\r\n\r\n  // Extract tool parameters from the start event\r\n  const toolParams =\r\n    session.startEvent?.metadata?.toolParams ||\r\n    session.startEvent?.data?.toolParams;\r\n  const hasParams = toolParams && Object.keys(toolParams).length > 0;\r\n\r\n  return (\r\n    <div\r\n      className={`ai-devtools-session ${className}`}\r\n      data-session-id={session.id}\r\n      data-status={session.status}\r\n    >\r\n      {/* Session header */}\r\n      <Tooltip\r\n        show={hasParams && showTooltip}\r\n        content={\r\n          <div className=\"ai-devtools-tooltip-content\">\r\n            <div className=\"ai-devtools-tooltip-title\">Tool Parameters</div>\r\n            <pre className=\"ai-devtools-tooltip-params\">\r\n              {formatToolParams(toolParams)}\r\n            </pre>\r\n          </div>\r\n        }\r\n      >\r\n        <div\r\n          className=\"ai-devtools-session-header\"\r\n          onClick={() => setIsExpanded(!isExpanded)}\r\n          onMouseEnter={() => hasParams && setShowTooltip(true)}\r\n          onMouseLeave={() => setShowTooltip(false)}\r\n        >\r\n          <div className=\"ai-devtools-session-content\">\r\n            {/* Status indicator */}\r\n            <div\r\n              className=\"ai-devtools-session-indicator\"\r\n              style={{ backgroundColor: statusColor }}\r\n              title={`${session.status} - ${session.toolName}`}\r\n            />\r\n\r\n            {/* Status icon */}\r\n            <span className=\"ai-devtools-session-icon\">{statusIcon}</span>\r\n\r\n            {/* Session info */}\r\n            <div className=\"ai-devtools-session-info\">\r\n              <div className=\"ai-devtools-session-tool-name\">\r\n                {formatToolName(session.toolName)}\r\n                {hasParams && (\r\n                  <span\r\n                    className=\"ai-devtools-session-params-indicator\"\r\n                    title=\"Has parameters\"\r\n                  >\r\n                    \r\n                  </span>\r\n                )}\r\n              </div>\r\n              <div className=\"ai-devtools-session-summary\">{summary}</div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Timestamp */}\r\n          <div className=\"ai-devtools-session-timestamp\">\r\n            {formatTimestamp(session.startTime)}\r\n          </div>\r\n\r\n          {/* Expand/collapse icon */}\r\n          <div className=\"ai-devtools-session-expand\">\r\n            <svg\r\n              className={`ai-devtools-session-arrow ${\r\n                isExpanded ? \"ai-devtools-session-arrow-expanded\" : \"\"\r\n              }`}\r\n              fill=\"none\"\r\n              stroke=\"currentColor\"\r\n              viewBox=\"0 0 24 24\"\r\n            >\r\n              <path\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n                strokeWidth={2}\r\n                d=\"M19 9l-7 7-7-7\"\r\n              />\r\n            </svg>\r\n          </div>\r\n        </div>\r\n      </Tooltip>\r\n\r\n      {/* Session events */}\r\n      {isExpanded && (\r\n        <div className=\"ai-devtools-session-events\">\r\n          {session.events.map((event) => (\r\n            <EventItem\r\n              key={event.id}\r\n              event={event}\r\n              className=\"ai-devtools-session-event\"\r\n            />\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","\"use client\";\r\n\r\nimport type { AIEvent } from \"../types\";\r\nimport { groupEventsIntoSessions } from \"../utils/session-grouper\";\r\nimport { EventItem } from \"./event-item\";\r\nimport { ToolCallSessionComponent } from \"./tool-call-session\";\r\n\r\ninterface EventListProps {\r\n  events: AIEvent[];\r\n  className?: string;\r\n  groupByToolCalls?: boolean;\r\n}\r\n\r\nexport function EventList({\r\n  events,\r\n  className = \"\",\r\n  groupByToolCalls = true,\r\n}: EventListProps) {\r\n  if (events.length === 0) {\r\n    return (\r\n      <div className={`ai-devtools-empty-state ${className}`}>\r\n        <div className=\"ai-devtools-empty-content\">\r\n          <div className=\"ai-devtools-empty-title\"> waiting for events...</div>\r\n          <div className=\"ai-devtools-empty-subtitle\">\r\n            start streaming to capture events\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!groupByToolCalls) {\r\n    // Show events in flat list (newest first)\r\n    return (\r\n      <div className={`ai-devtools-event-list ${className}`}>\r\n        {events\r\n          .slice()\r\n          .reverse()\r\n          .map((event) => (\r\n            <EventItem key={event.id} event={event} />\r\n          ))}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Group events into tool call sessions (keep chronological order for grouping)\r\n  const { sessions, standaloneEvents } = groupEventsIntoSessions(events);\r\n\r\n  return (\r\n    <div className={`ai-devtools-event-list ${className}`}>\r\n      {/* Tool call sessions (newest first) */}\r\n      {sessions\r\n        .slice()\r\n        .reverse()\r\n        .map((session) => (\r\n          <ToolCallSessionComponent\r\n            key={`session-${session.id}`}\r\n            session={session}\r\n          />\r\n        ))}\r\n\r\n      {/* Standalone events (newest first) */}\r\n      {standaloneEvents\r\n        .slice()\r\n        .reverse()\r\n        .map((event) => (\r\n          <EventItem key={`event-${event.id}`} event={event} />\r\n        ))}\r\n    </div>\r\n  );\r\n}\r\n","\"use client\";\r\n\r\nimport { useMemo } from \"react\";\r\nimport { darkStyles, JsonView } from \"react-json-view-lite\";\r\nimport \"react-json-view-lite/dist/index.css\";\r\n\r\ninterface StateDataExplorerProps {\r\n  currentState?: unknown;\r\n  className?: string;\r\n}\r\n\r\nexport function StateDataExplorer({\r\n  currentState,\r\n  className = \"\",\r\n}: StateDataExplorerProps) {\r\n  const displayData = useMemo(() => {\r\n    if (!currentState || typeof currentState !== \"object\") {\r\n      return currentState;\r\n    }\r\n\r\n    // Filter to only show essential chat properties\r\n    const essentialProps = [\"id\", \"messages\", \"error\", \"status\"];\r\n    const filteredState: Record<string, unknown> = {};\r\n\r\n    for (const prop of essentialProps) {\r\n      if (prop in currentState) {\r\n        filteredState[prop] = (currentState as Record<string, unknown>)[prop];\r\n      }\r\n    }\r\n\r\n    return filteredState;\r\n  }, [currentState]);\r\n\r\n  if (!displayData) {\r\n    return (\r\n      <div className={`ai-devtools-state-explorer-empty ${className}`}>\r\n        <div className=\"ai-devtools-state-explorer-empty-content\">\r\n          <div className=\"ai-devtools-state-explorer-empty-icon\"></div>\r\n          <div className=\"ai-devtools-state-explorer-empty-title\">\r\n            No State Data\r\n          </div>\r\n          <div className=\"ai-devtools-state-explorer-empty-description\">\r\n            Select a store to view its current state\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={`ai-devtools-state-explorer ${className}`}>\r\n      <div className=\"ai-devtools-state-explorer-content\">\r\n        <JsonView\r\n          data={displayData}\r\n          style={{\r\n            ...darkStyles,\r\n            container: \"ai-devtools-json-container\",\r\n            basicChildStyle: \"ai-devtools-json-basic-child\",\r\n            label: \"ai-devtools-json-label\",\r\n            stringValue: \"ai-devtools-json-string-value\",\r\n            numberValue: \"ai-devtools-json-number-value\",\r\n            booleanValue: \"ai-devtools-json-boolean-value\",\r\n            nullValue: \"ai-devtools-json-null-value\",\r\n            undefinedValue: \"ai-devtools-json-undefined-value\",\r\n            punctuation: \"ai-devtools-json-punctuation\",\r\n            collapseIcon: \"ai-devtools-json-collapse-icon\",\r\n            expandIcon: \"ai-devtools-json-expand-icon\",\r\n            collapsedContent: \"ai-devtools-json-collapsed-content\",\r\n            childFieldsContainer: \"ai-devtools-json-child-fields-container\",\r\n          }}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","\"use client\";\r\n\r\nimport {\r\n  ViewList as BottomPanelIcon,\r\n  Clear as ClearIcon,\r\n  Close as CloseIcon,\r\n  Pause as PauseIcon,\r\n  PlayArrow as PlayArrowIcon,\r\n  ViewSidebar as RightPanelIcon,\r\n} from \"@mui/icons-material\";\r\nimport React, {\r\n  useCallback,\r\n  useEffect,\r\n  useMemo,\r\n  useRef,\r\n  useState,\r\n} from \"react\";\r\nimport { useCurrentState } from \"../hooks/use-current-state\";\r\nimport type { AIEvent, DevtoolsConfig, FilterOptions } from \"../types\";\r\nimport { formatToolName, getEventTypeIcon } from \"../utils/formatting\";\r\nimport { AgentFlowVisualization } from \"./agent-flow-visualization\";\r\nimport { EventList } from \"./event-list\";\r\nimport { StateDataExplorer } from \"./state-data-explorer\";\r\n\r\nconst EVENT_TYPES = [\r\n  \"tool-call-start\",\r\n  \"tool-call-result\",\r\n  \"tool-call-error\",\r\n  \"message-start\",\r\n  \"message-chunk\",\r\n  \"message-complete\",\r\n  \"start\",\r\n  \"start-step\",\r\n  \"text-start\",\r\n  \"text-delta\",\r\n  \"text-end\",\r\n  \"reasoning-start\",\r\n  \"reasoning-delta\",\r\n  \"reasoning-end\",\r\n  \"finish-step\",\r\n  \"finish\",\r\n  \"stream-done\",\r\n  \"error\",\r\n  \"unknown\",\r\n] as const;\r\n\r\nconst EVENT_TYPE_LABELS: Record<string, string> = {\r\n  \"tool-call-start\": \"Tool Starts\",\r\n  \"tool-call-result\": \"Tool Results\",\r\n  \"tool-call-error\": \"Tool Errors\",\r\n  \"message-start\": \"Message Starts\",\r\n  \"message-chunk\": \"Message Chunks\",\r\n  \"message-complete\": \"Message Complete\",\r\n  start: \"Stream Start\",\r\n  \"start-step\": \"Step Starts\",\r\n  \"text-start\": \"Text Starts\",\r\n  \"text-delta\": \"Text Deltas\",\r\n  \"text-end\": \"Text Ends\",\r\n  \"reasoning-start\": \"Reasoning Start\",\r\n  \"reasoning-delta\": \"Reasoning Deltas\",\r\n  \"reasoning-end\": \"Reasoning End\",\r\n  \"finish-step\": \"Step Finishes\",\r\n  finish: \"Stream Finishes\",\r\n  \"stream-done\": \"Stream Done\",\r\n  error: \"Errors\",\r\n  unknown: \"Unknown Events\",\r\n};\r\n\r\ninterface DevtoolsPanelProps {\r\n  events: AIEvent[];\r\n  isCapturing: boolean;\r\n  onToggleCapturing: () => void;\r\n  onClearEvents: () => void;\r\n  onClose: () => void;\r\n  onTogglePosition: () => void;\r\n  config: DevtoolsConfig;\r\n  className?: string;\r\n}\r\n\r\nexport function DevtoolsPanel({\r\n  events,\r\n  isCapturing,\r\n  onToggleCapturing,\r\n  onClearEvents,\r\n  onClose,\r\n  onTogglePosition,\r\n  config,\r\n  className = \"\",\r\n}: DevtoolsPanelProps) {\r\n  const [showFilters] = useState(false);\r\n  const [showSearchSuggestions, setShowSearchSuggestions] = useState(false);\r\n  const [filters, setFilters] = useState<FilterOptions>({\r\n    types: [],\r\n    toolNames: [],\r\n    searchQuery: \"\",\r\n  });\r\n\r\n  // State watching functionality\r\n  const [selectedStoreId, setSelectedStoreId] = useState<string | null>(null);\r\n\r\n  // Tab state (events, agents, state)\r\n  const [activeTab, setActiveTab] = useState<\"events\" | \"agents\" | \"state\">(\r\n    \"events\",\r\n  );\r\n\r\n  const { isStoreAvailable, availableStoreIds, currentStates } =\r\n    useCurrentState({\r\n      enabled: true,\r\n    });\r\n\r\n  // Auto-select default store when available\r\n  useEffect(() => {\r\n    if (availableStoreIds.length > 0 && !selectedStoreId) {\r\n      // Prefer \"default\" store if available, otherwise select the first one\r\n      const defaultStoreId = availableStoreIds.includes(\"default\")\r\n        ? \"default\"\r\n        : availableStoreIds[0];\r\n      setSelectedStoreId(defaultStoreId);\r\n    }\r\n  }, [availableStoreIds, selectedStoreId]);\r\n\r\n  // Resize functionality\r\n  const [isResizing, setIsResizing] = useState(false);\r\n  const [panelHeight, setPanelHeight] = useState(config.height || 300);\r\n  const [panelWidth, setPanelWidth] = useState(config.width || 500);\r\n  const panelRef = useRef<HTMLDivElement>(null);\r\n  const resizeRef = useRef<HTMLButtonElement>(null);\r\n\r\n  // Animation state for REC indicator\r\n  const [isReceivingEvents, setIsReceivingEvents] = useState(false);\r\n  const lastEventCountRef = useRef(events.length);\r\n\r\n  // Calculate available tool names, event counts, and detect model\r\n  const { availableToolNames, eventCounts } = useMemo(() => {\r\n    const toolNames = new Set<string>();\r\n    const counts = {} as Record<string, number>;\r\n    let detectedModel: string | undefined;\r\n\r\n    for (const event of events) {\r\n      // Count by type\r\n      counts[event.type] = (counts[event.type] || 0) + 1;\r\n\r\n      // Collect tool names\r\n      if (event.metadata?.toolName) {\r\n        toolNames.add(event.metadata.toolName);\r\n      }\r\n\r\n      // Try to detect model from event data\r\n      if (!detectedModel && event.data) {\r\n        // Check for model info in various common locations\r\n        const model =\r\n          event.data.model ||\r\n          event.data.modelId ||\r\n          event.data.providerMetadata?.openai?.model ||\r\n          event.data.providerMetadata?.anthropic?.model ||\r\n          event.data.providerMetadata?.google?.model;\r\n\r\n        if (model) {\r\n          detectedModel = model;\r\n        }\r\n      }\r\n    }\r\n\r\n    return {\r\n      availableToolNames: Array.from(toolNames).sort(),\r\n      eventCounts: counts,\r\n      detectedModelId: detectedModel,\r\n    };\r\n  }, [events]);\r\n\r\n  // Show all suggestions when dropdown is open (no filtering based on search query)\r\n  const filteredSuggestions = useMemo(() => {\r\n    return {\r\n      eventTypes: EVENT_TYPES,\r\n      tools: availableToolNames,\r\n      quickSearches: [\"error\", \"tool\", \"text\", \"message\", \"start\", \"end\"],\r\n    };\r\n  }, [availableToolNames]);\r\n\r\n  // Filter events based on current filters\r\n  const filteredEvents = useMemo(() => {\r\n    return events.filter((event) => {\r\n      // Filter by type\r\n      if (filters.types.length > 0 && !filters.types.includes(event.type)) {\r\n        return false;\r\n      }\r\n\r\n      // Filter by tool name\r\n      if (filters.toolNames.length > 0) {\r\n        const eventToolName = event.metadata?.toolName;\r\n        if (!eventToolName || !filters.toolNames.includes(eventToolName)) {\r\n          return false;\r\n        }\r\n      }\r\n\r\n      // Filter by search query\r\n      if (filters.searchQuery.trim()) {\r\n        const query = filters.searchQuery.toLowerCase().trim();\r\n        const eventData = JSON.stringify(event.data).toLowerCase();\r\n        const eventMetadata = JSON.stringify(\r\n          event.metadata || {},\r\n        ).toLowerCase();\r\n\r\n        if (!eventData.includes(query) && !eventMetadata.includes(query)) {\r\n          return false;\r\n        }\r\n      }\r\n\r\n      return true;\r\n    });\r\n  }, [events, filters]);\r\n\r\n  const hasActiveFilters =\r\n    filters.types.length > 0 ||\r\n    filters.toolNames.length > 0 ||\r\n    filters.searchQuery.trim().length > 0;\r\n\r\n  // Resize handlers\r\n  const handleMouseDown = useCallback((e: React.MouseEvent) => {\r\n    e.preventDefault();\r\n    setIsResizing(true);\r\n  }, []);\r\n\r\n  const handleMouseMove = useCallback(\r\n    (e: MouseEvent) => {\r\n      if (!isResizing) return;\r\n\r\n      if (config.position === \"bottom\") {\r\n        const newHeight = window.innerHeight - e.clientY;\r\n        const minHeight = 200;\r\n        const maxHeight = window.innerHeight * 0.8;\r\n        setPanelHeight(Math.max(minHeight, Math.min(maxHeight, newHeight)));\r\n      } else {\r\n        const newWidth = window.innerWidth - e.clientX;\r\n        const minWidth = 500;\r\n        const maxWidth = window.innerWidth * 0.8;\r\n        setPanelWidth(Math.max(minWidth, Math.min(maxWidth, newWidth)));\r\n      }\r\n    },\r\n    [isResizing, config.position],\r\n  );\r\n\r\n  const handleMouseUp = useCallback(() => {\r\n    setIsResizing(false);\r\n  }, []);\r\n\r\n  // Add global mouse event listeners\r\n  React.useEffect(() => {\r\n    if (isResizing) {\r\n      document.addEventListener(\"mousemove\", handleMouseMove);\r\n      document.addEventListener(\"mouseup\", handleMouseUp);\r\n      document.body.style.cursor =\r\n        config.position === \"bottom\" ? \"ns-resize\" : \"ew-resize\";\r\n      document.body.style.userSelect = \"none\";\r\n    } else {\r\n      document.removeEventListener(\"mousemove\", handleMouseMove);\r\n      document.removeEventListener(\"mouseup\", handleMouseUp);\r\n      document.body.style.cursor = \"\";\r\n      document.body.style.userSelect = \"\";\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener(\"mousemove\", handleMouseMove);\r\n      document.removeEventListener(\"mouseup\", handleMouseUp);\r\n      document.body.style.cursor = \"\";\r\n      document.body.style.userSelect = \"\";\r\n    };\r\n  }, [isResizing, handleMouseMove, handleMouseUp, config.position]);\r\n\r\n  // Add keyboard event listener for Escape key\r\n  React.useEffect(() => {\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      if (e.key === \"Escape\") {\r\n        onClose();\r\n      }\r\n    };\r\n\r\n    document.addEventListener(\"keydown\", handleKeyDown);\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", handleKeyDown);\r\n    };\r\n  }, [onClose]);\r\n\r\n  // Calculate streaming speed metrics (tokens per second, characters per second)\r\n  const streamingSpeed = useMemo(() => {\r\n    const now = Date.now();\r\n    const lastMinute = now - 60000; // Last 60 seconds\r\n\r\n    // Get text-delta events from the last minute\r\n    const recentTextDeltas = events.filter(\r\n      (event) => event.type === \"text-delta\" && event.timestamp >= lastMinute,\r\n    );\r\n\r\n    if (recentTextDeltas.length === 0) {\r\n      return { tokensPerSecond: 0, charactersPerSecond: 0 };\r\n    }\r\n\r\n    // Calculate total characters and estimate tokens\r\n    const totalCharacters = recentTextDeltas.reduce((sum, event) => {\r\n      const content = event.data?.delta || event.data?.text || \"\";\r\n      return sum + content.length;\r\n    }, 0);\r\n\r\n    // Estimate tokens (common heuristic: 1 token  4 characters)\r\n    const totalTokens = Math.round(totalCharacters / 4);\r\n\r\n    // Calculate duration in seconds\r\n    const firstEvent = recentTextDeltas[0];\r\n    const lastEvent = recentTextDeltas[recentTextDeltas.length - 1];\r\n\r\n    if (!firstEvent || !lastEvent) {\r\n      return { tokensPerSecond: 0, charactersPerSecond: 0 };\r\n    }\r\n\r\n    const firstEventTime = firstEvent.timestamp;\r\n    const lastEventTime = lastEvent.timestamp;\r\n    const durationSeconds = (lastEventTime - firstEventTime) / 1000;\r\n\r\n    if (durationSeconds === 0) {\r\n      return { tokensPerSecond: 0, charactersPerSecond: 0 };\r\n    }\r\n\r\n    return {\r\n      tokensPerSecond: Number.parseFloat(\r\n        (totalTokens / durationSeconds).toFixed(2),\r\n      ),\r\n      charactersPerSecond: Number.parseFloat(\r\n        (totalCharacters / durationSeconds).toFixed(2),\r\n      ),\r\n    };\r\n  }, [events]);\r\n\r\n  // Detect new events and trigger animation\r\n  React.useEffect(() => {\r\n    if (events.length > lastEventCountRef.current) {\r\n      setIsReceivingEvents(true);\r\n      // Reset animation after 1 second\r\n      const timer = setTimeout(() => {\r\n        setIsReceivingEvents(false);\r\n      }, 1000);\r\n\r\n      lastEventCountRef.current = events.length;\r\n\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [events.length]);\r\n\r\n  return (\r\n    <div\r\n      ref={panelRef}\r\n      className={`ai-devtools-panel ai-devtools-panel-${config.position} ${className}`}\r\n      style={{\r\n        height: config.position === \"bottom\" ? panelHeight : undefined,\r\n        width: config.position === \"right\" ? panelWidth : undefined,\r\n      }}\r\n    >\r\n      {/* Resize Handle */}\r\n      <button\r\n        ref={resizeRef}\r\n        type=\"button\"\r\n        className={`ai-devtools-resize-handle ai-devtools-resize-handle-${config.position}`}\r\n        onMouseDown={handleMouseDown}\r\n        onKeyDown={(e) => {\r\n          if (e.key === \"Enter\" || e.key === \" \") {\r\n            e.preventDefault();\r\n            // Create a synthetic mouse event for keyboard interaction\r\n            const syntheticEvent = {\r\n              ...e,\r\n              preventDefault: e.preventDefault,\r\n              clientX: 0,\r\n              clientY: 0,\r\n              button: 0,\r\n              buttons: 0,\r\n              movementX: 0,\r\n              movementY: 0,\r\n              pageX: 0,\r\n              pageY: 0,\r\n              screenX: 0,\r\n              screenY: 0,\r\n              relatedTarget: null,\r\n            } as unknown as React.MouseEvent<HTMLButtonElement>;\r\n            handleMouseDown(syntheticEvent);\r\n          }\r\n        }}\r\n      />\r\n\r\n      {/* Header */}\r\n      <div className=\"ai-devtools-header\">\r\n        {/* Main Search Bar */}\r\n        <div className=\"ai-devtools-search-bar\">\r\n          <div className=\"ai-devtools-search-input-container\">\r\n            {/* Search Input */}\r\n            <input\r\n              type=\"text\"\r\n              value={filters.searchQuery}\r\n              onChange={(e) => {\r\n                const value = e.target.value;\r\n                setFilters((prev) => ({ ...prev, searchQuery: value }));\r\n                // Close suggestions when user types to filter the actual list\r\n                setShowSearchSuggestions(false);\r\n              }}\r\n              onFocus={() => {\r\n                setShowSearchSuggestions(true);\r\n              }}\r\n              onBlur={() => {\r\n                // Delay hiding to allow clicking on suggestions\r\n                setTimeout(() => setShowSearchSuggestions(false), 200);\r\n              }}\r\n              placeholder={`${filteredEvents.length} total events found...`}\r\n              className=\"ai-devtools-search-input-main\"\r\n            />\r\n\r\n            {/* Filter Indicator */}\r\n            {(filters.types.length > 0 || filters.toolNames.length > 0) && (\r\n              <div className=\"ai-devtools-filter-indicator\">\r\n                <span className=\"ai-devtools-filter-indicator-count\">\r\n                  {filters.types.length + filters.toolNames.length}\r\n                </span>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Search Suggestions */}\r\n          {showSearchSuggestions && (\r\n            <div className=\"ai-devtools-search-suggestions\">\r\n              <div className=\"ai-devtools-search-suggestions-content\">\r\n                {/* Event Types */}\r\n                {filteredSuggestions.eventTypes.length > 0 && (\r\n                  <div className=\"ai-devtools-suggestion-section\">\r\n                    <div className=\"ai-devtools-suggestion-section-title\">\r\n                      Event Types\r\n                    </div>\r\n                    <div className=\"ai-devtools-suggestion-options\">\r\n                      {filteredSuggestions.eventTypes.map((type) => {\r\n                        const isActive = filters.types.includes(type);\r\n                        return (\r\n                          <button\r\n                            key={type}\r\n                            type=\"button\"\r\n                            className={`ai-devtools-suggestion-option ${isActive ? \"active\" : \"\"}`}\r\n                            onClick={() => {\r\n                              setFilters((prev) => ({\r\n                                ...prev,\r\n                                types: isActive\r\n                                  ? prev.types.filter((t) => t !== type)\r\n                                  : [...prev.types, type],\r\n                              }));\r\n                            }}\r\n                          >\r\n                            <span className=\"ai-devtools-suggestion-icon\">\r\n                              {getEventTypeIcon(type)}\r\n                            </span>\r\n                            <span className=\"ai-devtools-suggestion-label\">\r\n                              {EVENT_TYPE_LABELS[type]}\r\n                            </span>\r\n                            <span className=\"ai-devtools-suggestion-count\">\r\n                              {eventCounts[type] || 0}\r\n                            </span>\r\n                          </button>\r\n                        );\r\n                      })}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Tool Names */}\r\n                {filteredSuggestions.tools.length > 0 && (\r\n                  <div className=\"ai-devtools-suggestion-section\">\r\n                    <div className=\"ai-devtools-suggestion-section-title\">\r\n                      Tools\r\n                    </div>\r\n                    <div className=\"ai-devtools-suggestion-options\">\r\n                      {filteredSuggestions.tools.map((toolName) => {\r\n                        const isActive = filters.toolNames.includes(toolName);\r\n                        return (\r\n                          <button\r\n                            key={toolName}\r\n                            type=\"button\"\r\n                            className={`ai-devtools-suggestion-option ${isActive ? \"active\" : \"\"}`}\r\n                            onClick={() => {\r\n                              setFilters((prev) => ({\r\n                                ...prev,\r\n                                toolNames: isActive\r\n                                  ? prev.toolNames.filter((t) => t !== toolName)\r\n                                  : [...prev.toolNames, toolName],\r\n                              }));\r\n                            }}\r\n                          >\r\n                            <span className=\"ai-devtools-suggestion-icon\">\r\n                              \r\n                            </span>\r\n                            <span className=\"ai-devtools-suggestion-label\">\r\n                              {formatToolName(toolName)}\r\n                            </span>\r\n                          </button>\r\n                        );\r\n                      })}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Quick Search Examples */}\r\n                {filteredSuggestions.quickSearches.length > 0 && (\r\n                  <div className=\"ai-devtools-suggestion-section\">\r\n                    <div className=\"ai-devtools-suggestion-section-title\">\r\n                      Quick Search\r\n                    </div>\r\n                    <div className=\"ai-devtools-suggestion-options\">\r\n                      {filteredSuggestions.quickSearches.map((term) => (\r\n                        <button\r\n                          key={term}\r\n                          type=\"button\"\r\n                          className=\"ai-devtools-suggestion-option\"\r\n                          onClick={() => {\r\n                            setFilters((prev) => ({\r\n                              ...prev,\r\n                              searchQuery: term,\r\n                            }));\r\n                          }}\r\n                        >\r\n                          <span className=\"ai-devtools-suggestion-icon\">\r\n                            {term === \"error\"\r\n                              ? \"!\"\r\n                              : term === \"tool\"\r\n                                ? \"\"\r\n                                : \"T\"}\r\n                          </span>\r\n                          <span className=\"ai-devtools-suggestion-label\">\r\n                            {term}\r\n                          </span>\r\n                        </button>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"ai-devtools-header-right\">\r\n          {/* Live Button with Pause/Play */}\r\n          <button\r\n            type=\"button\"\r\n            onClick={onToggleCapturing}\r\n            className={`ai-devtools-btn ${isReceivingEvents ? \"receiving\" : \"\"}`}\r\n          >\r\n            {isCapturing ? (\r\n              <PauseIcon className=\"ai-devtools-btn-icon\" />\r\n            ) : (\r\n              <PlayArrowIcon className=\"ai-devtools-btn-icon\" />\r\n            )}\r\n            <span>Live</span>\r\n          </button>\r\n\r\n          {/* Clear events */}\r\n          <button\r\n            type=\"button\"\r\n            onClick={onClearEvents}\r\n            className=\"ai-devtools-btn\"\r\n          >\r\n            <ClearIcon className=\"ai-devtools-btn-icon\" />\r\n            <span>clear</span>\r\n          </button>\r\n\r\n          {/* Position Toggle Button */}\r\n          <button\r\n            type=\"button\"\r\n            onClick={onTogglePosition}\r\n            className=\"ai-devtools-position-toggle-btn\"\r\n            title={`Switch to ${config.position === \"bottom\" ? \"right\" : \"bottom\"} panel`}\r\n          >\r\n            {config.position === \"bottom\" ? (\r\n              <RightPanelIcon className=\"ai-devtools-position-toggle-icon\" />\r\n            ) : (\r\n              <BottomPanelIcon className=\"ai-devtools-position-toggle-icon\" />\r\n            )}\r\n          </button>\r\n\r\n          {/* Close */}\r\n          <button\r\n            type=\"button\"\r\n            onClick={onClose}\r\n            className=\"ai-devtools-close-btn\"\r\n          >\r\n            <CloseIcon className=\"ai-devtools-close-icon\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filter Badges */}\r\n      {showFilters && (\r\n        <div className=\"ai-devtools-filter-badges\">\r\n          {/* Event Type Filters */}\r\n          {filters.types.length > 0 && (\r\n            <div className=\"ai-devtools-filter-group\">\r\n              <span className=\"ai-devtools-filter-group-label\">Types:</span>\r\n              {filters.types.map((type) => (\r\n                <button\r\n                  key={type}\r\n                  type=\"button\"\r\n                  className=\"ai-devtools-filter-badge active\"\r\n                  onClick={() => {\r\n                    setFilters((prev) => ({\r\n                      ...prev,\r\n                      types: prev.types.filter((t) => t !== type),\r\n                    }));\r\n                  }}\r\n                >\r\n                  {type.replace(/-/g, \" \")}\r\n                  <span className=\"ai-devtools-filter-remove\"></span>\r\n                </button>\r\n              ))}\r\n            </div>\r\n          )}\r\n\r\n          {/* Tool Name Filters */}\r\n          {filters.toolNames.length > 0 && (\r\n            <div className=\"ai-devtools-filter-group\">\r\n              <span className=\"ai-devtools-filter-group-label\">Tools:</span>\r\n              {filters.toolNames.map((toolName) => (\r\n                <button\r\n                  key={toolName}\r\n                  type=\"button\"\r\n                  className=\"ai-devtools-filter-badge active\"\r\n                  onClick={() => {\r\n                    setFilters((prev) => ({\r\n                      ...prev,\r\n                      toolNames: prev.toolNames.filter((t) => t !== toolName),\r\n                    }));\r\n                  }}\r\n                >\r\n                  {formatToolName(toolName)}\r\n                  <span className=\"ai-devtools-filter-remove\"></span>\r\n                </button>\r\n              ))}\r\n            </div>\r\n          )}\r\n\r\n          {/* Quick Filter Options */}\r\n          <div className=\"ai-devtools-filter-group\">\r\n            <span className=\"ai-devtools-filter-group-label\">Quick:</span>\r\n            <button\r\n              type=\"button\"\r\n              className={`ai-devtools-filter-badge ${filters.types.includes(\"tool-call-start\") ? \"active\" : \"\"}`}\r\n              onClick={() => {\r\n                const isActive = filters.types.includes(\"tool-call-start\");\r\n                setFilters((prev) => ({\r\n                  ...prev,\r\n                  types: isActive\r\n                    ? prev.types.filter((t) => t !== \"tool-call-start\")\r\n                    : [...prev.types, \"tool-call-start\"],\r\n                }));\r\n              }}\r\n            >\r\n              Tool Calls\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              className={`ai-devtools-filter-badge ${filters.types.includes(\"text-delta\") ? \"active\" : \"\"}`}\r\n              onClick={() => {\r\n                const isActive = filters.types.includes(\"text-delta\");\r\n                setFilters((prev) => ({\r\n                  ...prev,\r\n                  types: isActive\r\n                    ? prev.types.filter((t) => t !== \"text-delta\")\r\n                    : [...prev.types, \"text-delta\"],\r\n                }));\r\n              }}\r\n            >\r\n              Text Events\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              className={`ai-devtools-filter-badge ${filters.types.includes(\"error\") ? \"active\" : \"\"}`}\r\n              onClick={() => {\r\n                const isActive = filters.types.includes(\"error\");\r\n                setFilters((prev) => ({\r\n                  ...prev,\r\n                  types: isActive\r\n                    ? prev.types.filter((t) => t !== \"error\")\r\n                    : [...prev.types, \"error\"],\r\n                }));\r\n              }}\r\n            >\r\n              Errors\r\n            </button>\r\n            {hasActiveFilters && (\r\n              <button\r\n                type=\"button\"\r\n                className=\"ai-devtools-filter-badge clear\"\r\n                onClick={() => {\r\n                  setFilters((prev) => ({\r\n                    ...prev,\r\n                    types: [],\r\n                    toolNames: [],\r\n                    searchQuery: \"\",\r\n                  }));\r\n                }}\r\n              >\r\n                Clear All\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Tabs Navigation */}\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          gap: 0,\r\n          borderBottom: \"1px solid #27272a\",\r\n        }}\r\n      >\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => setActiveTab(\"events\")}\r\n          style={{\r\n            padding: \"8px 16px\",\r\n            background: \"transparent\",\r\n            border: \"none\",\r\n            color: activeTab === \"events\" ? \"#e5e7eb\" : \"#666666\",\r\n            fontSize: 11,\r\n            cursor: \"pointer\",\r\n            transition: \"all 0.2s\",\r\n          }}\r\n        >\r\n          Events\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => setActiveTab(\"agents\")}\r\n          style={{\r\n            padding: \"8px 16px\",\r\n            background: \"transparent\",\r\n            border: \"none\",\r\n            color: activeTab === \"agents\" ? \"#e5e7eb\" : \"#666666\",\r\n            fontSize: 11,\r\n            cursor: \"pointer\",\r\n            transition: \"all 0.2s\",\r\n          }}\r\n        >\r\n          Agents\r\n        </button>\r\n        {isStoreAvailable && (\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => setActiveTab(\"state\")}\r\n            style={{\r\n              padding: \"8px 16px\",\r\n              background: \"transparent\",\r\n              border: \"none\",\r\n              color: activeTab === \"state\" ? \"#e5e7eb\" : \"#666666\",\r\n              fontSize: 11,\r\n              cursor: \"pointer\",\r\n              transition: \"all 0.2s\",\r\n            }}\r\n          >\r\n            State\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Content */}\r\n      <div className=\"ai-devtools-panel-content\">\r\n        <div className=\"ai-devtools-content\">\r\n          {activeTab === \"events\" && (\r\n            <div className=\"ai-devtools-events\">\r\n              <EventList events={filteredEvents} />\r\n            </div>\r\n          )}\r\n          {activeTab === \"agents\" && <AgentFlowVisualization events={events} />}\r\n          {activeTab === \"state\" && isStoreAvailable && (\r\n            <div className=\"ai-devtools-state-panel-full\">\r\n              <StateDataExplorer\r\n                currentState={\r\n                  selectedStoreId ? currentStates[selectedStoreId] : undefined\r\n                }\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Bottom Stats Section */}\r\n      <div className=\"ai-devtools-bottom-stats\">\r\n        {/* Tokens per second on the left */}\r\n        <div className=\"ai-devtools-tokens-section\">\r\n          <div className=\"ai-devtools-speed-metrics\">\r\n            <div className=\"ai-devtools-speed-metric\">\r\n              <span className=\"ai-devtools-speed-value\">\r\n                {streamingSpeed.tokensPerSecond}\r\n              </span>\r\n              <span className=\"ai-devtools-speed-label\">tok/s</span>\r\n            </div>\r\n            <div className=\"ai-devtools-speed-metric\">\r\n              <span className=\"ai-devtools-speed-value\">\r\n                {streamingSpeed.charactersPerSecond}\r\n              </span>\r\n              <span className=\"ai-devtools-speed-label\">char/s</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","\"use client\";\r\n\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { useAIDevtools } from \"../hooks/use-ai-devtools\";\r\nimport type { DevtoolsConfig, UseAIDevtoolsOptions } from \"../types\";\r\nimport { DevtoolsButton } from \"./devtools-button\";\r\nimport { DevtoolsPanel } from \"./devtools-panel\";\r\n\r\ninterface AIDevtoolsProps extends UseAIDevtoolsOptions {\r\n  config?: Partial<DevtoolsConfig>;\r\n  className?: string;\r\n  debug?: boolean;\r\n}\r\n\r\nconst defaultConfig: DevtoolsConfig = {\r\n  enabled: true,\r\n  maxEvents: 1000,\r\n  position: \"bottom\",\r\n  height: 400,\r\n  theme: \"auto\",\r\n  streamCapture: {\r\n    enabled: true,\r\n    endpoint: \"/api/chat\",\r\n    autoConnect: true,\r\n  },\r\n  throttle: {\r\n    enabled: true,\r\n    interval: 100, // 100ms throttle by default\r\n    includeTypes: [\"text-delta\"], // Only throttle high-frequency text-delta events by default\r\n  },\r\n};\r\n\r\nexport function AIDevtools({\r\n  enabled = true,\r\n  maxEvents = 1000,\r\n  onEvent,\r\n  config = {},\r\n  className = \"\",\r\n  debug = false,\r\n}: AIDevtoolsProps) {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [hasNewEvents, setHasNewEvents] = useState(false);\r\n  const [isMounted, setIsMounted] = useState(false);\r\n  const [position, setPosition] = useState<\"bottom\" | \"right\">(\"bottom\");\r\n  const previousEventCountRef = useRef(0);\r\n\r\n  // Load panel state from localStorage on mount\r\n  useEffect(() => {\r\n    if (isMounted) {\r\n      const savedState = localStorage.getItem(\"ai-devtools-panel-open\");\r\n      if (savedState !== null) {\r\n        setIsOpen(JSON.parse(savedState));\r\n      }\r\n      const savedPosition = localStorage.getItem(\"ai-devtools-panel-position\");\r\n      if (\r\n        savedPosition &&\r\n        (savedPosition === \"bottom\" || savedPosition === \"right\")\r\n      ) {\r\n        setPosition(savedPosition);\r\n      }\r\n    }\r\n  }, [isMounted]);\r\n\r\n  // Save panel state to localStorage when it changes\r\n  useEffect(() => {\r\n    if (isMounted) {\r\n      localStorage.setItem(\"ai-devtools-panel-open\", JSON.stringify(isOpen));\r\n    }\r\n  }, [isOpen, isMounted]);\r\n\r\n  // Save position state to localStorage when it changes\r\n  useEffect(() => {\r\n    if (isMounted) {\r\n      localStorage.setItem(\"ai-devtools-panel-position\", position);\r\n    }\r\n  }, [position, isMounted]);\r\n\r\n  const finalConfig = { ...defaultConfig, ...config, position };\r\n\r\n  // Toggle position between bottom and right\r\n  const togglePosition = () => {\r\n    setPosition((prev) => (prev === \"bottom\" ? \"right\" : \"bottom\"));\r\n  };\r\n\r\n  // Always call hooks (to maintain hook order)\r\n  const { events, isCapturing, clearEvents, toggleCapturing } = useAIDevtools({\r\n    enabled: enabled && isMounted, // Only enable after mounted\r\n    maxEvents,\r\n    onEvent,\r\n    debug,\r\n    streamCapture: finalConfig.streamCapture\r\n      ? {\r\n          enabled: finalConfig.streamCapture.enabled,\r\n          endpoints: [finalConfig.streamCapture.endpoint],\r\n          autoConnect: finalConfig.streamCapture.autoConnect,\r\n        }\r\n      : undefined,\r\n    throttle: finalConfig.throttle,\r\n  });\r\n\r\n  // Hydration-safe mounting check\r\n  useEffect(() => {\r\n    setIsMounted(true);\r\n  }, []);\r\n\r\n  // Track new events for button animation (always call this hook)\r\n  useEffect(() => {\r\n    if (isMounted && events.length > previousEventCountRef.current) {\r\n      setHasNewEvents(true);\r\n      // Clear the animation after a short delay\r\n      const timer = setTimeout(() => setHasNewEvents(false), 2000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n    previousEventCountRef.current = events.length;\r\n  }, [events.length, isMounted]);\r\n\r\n  // Don't render anything until mounted (hydration-safe)\r\n  if (!isMounted) {\r\n    return null;\r\n  }\r\n\r\n  if (!finalConfig.enabled) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"ai-devtools\">\r\n      {/* Devtools button */}\r\n      <DevtoolsButton\r\n        onToggle={() => setIsOpen(!isOpen)}\r\n        eventCount={events.length}\r\n        hasNewEvents={hasNewEvents && !isOpen}\r\n        className={className}\r\n      />\r\n\r\n      {/* Devtools panel */}\r\n      {isOpen && (\r\n        <DevtoolsPanel\r\n          events={events}\r\n          isCapturing={isCapturing}\r\n          onToggleCapturing={toggleCapturing}\r\n          onClearEvents={clearEvents}\r\n          onClose={() => setIsOpen(false)}\r\n          onTogglePosition={togglePosition}\r\n          config={finalConfig}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","\"use client\";\r\n\r\ninterface StoreListProps {\r\n  storeIds: string[];\r\n  selectedStoreId: string | null;\r\n  onSelectStore: (storeId: string) => void;\r\n}\r\n\r\nexport function StoreList({\r\n  storeIds,\r\n  selectedStoreId,\r\n  onSelectStore,\r\n}: StoreListProps) {\r\n  if (storeIds.length === 0) {\r\n    return (\r\n      <div className=\"ai-devtools-state-changes-empty\">\r\n        <div className=\"ai-devtools-state-changes-empty-content\">\r\n          <div className=\"ai-devtools-state-changes-empty-icon\"></div>\r\n          <div className=\"ai-devtools-state-changes-empty-title\">\r\n            No Stores Found\r\n          </div>\r\n          <div className=\"ai-devtools-state-changes-empty-description\">\r\n            Ensure you are using `@ai-sdk-tools/store` in your application.\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"ai-devtools-state-changes-list\">\r\n      <div className=\"ai-devtools-state-changes-header\">\r\n        <h3>Available Stores</h3>\r\n        <span className=\"ai-devtools-state-changes-count\">\r\n          {storeIds.length} store{storeIds.length !== 1 ? \"s\" : \"\"}\r\n        </span>\r\n      </div>\r\n      <div className=\"ai-devtools-state-changes-items\">\r\n        {storeIds.map((storeId) => (\r\n          <button\r\n            key={storeId}\r\n            type=\"button\"\r\n            onClick={() => onSelectStore(storeId)}\r\n            className={`ai-devtools-state-change-item ${\r\n              selectedStoreId === storeId ? \"selected\" : \"\"\r\n            }`}\r\n            onKeyDown={(e) => {\r\n              if (e.key === \"Enter\" || e.key === \" \") {\r\n                e.preventDefault();\r\n                onSelectStore(storeId);\r\n              }\r\n            }}\r\n          >\r\n            <div className=\"ai-devtools-state-change-item-content\">\r\n              <div className=\"ai-devtools-state-change-item-header\">\r\n                <div className=\"ai-devtools-state-change-type\">\r\n                  <span className=\"ai-devtools-state-change-type-label\">\r\n                    {storeId === \"default\" ? \"Default\" : storeId}\r\n                  </span>\r\n                </div>\r\n                <span className=\"ai-devtools-state-change-timestamp\">\r\n                  Store\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </button>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * Working state detection utilities\r\n */\r\n\r\n// Check if store package is available\r\nexport function isStorePackageAvailable(): boolean {\r\n  try {\r\n    require(\"@ai-sdk-tools/store\");\r\n    return true;\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n"]}