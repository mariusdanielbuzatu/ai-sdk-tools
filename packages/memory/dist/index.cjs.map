{"version":3,"sources":["../src/index.ts","../src/utils.ts"],"sourcesContent":["// Provider-agnostic root exports only.\r\n// Note: You can add provider-specific helpers in /providers (to avoid peer dependency conflicts)\r\nexport type {\r\n  ChatSession,\r\n  ChatsConfig,\r\n  ConversationMessage,\r\n  GenerateSuggestionsConfig,\r\n  GenerateTitleConfig,\r\n  MemoryConfig,\r\n  MemoryProvider,\r\n  MemoryScope,\r\n  WorkingMemory,\r\n} from \"./types.js\";\r\n\r\n// Utils\r\nexport {\r\n  DEFAULT_TEMPLATE,\r\n  formatHistory,\r\n  formatWorkingMemory,\r\n  getWorkingMemoryInstructions,\r\n} from \"./utils.js\";\r\n","import type { ConversationMessage, WorkingMemory } from \"./types.js\";\r\n\r\n/**\r\n * Default working memory template\r\n */\r\nexport const DEFAULT_TEMPLATE = `# Working Memory\r\n\r\n## Key Facts\r\n- [Important information goes here]\r\n\r\n## Current Focus\r\n- [What the user is working on]\r\n\r\n## Preferences\r\n- [User preferences and settings]\r\n`;\r\n\r\n/**\r\n * Format working memory for system prompt\r\n */\r\nexport function formatWorkingMemory(memory: WorkingMemory | null): string {\r\n  if (!memory?.content) return \"\";\r\n  return `\\n## Working Memory\\n\\n${memory.content}\\n`;\r\n}\r\n\r\n/**\r\n * Format conversation history\r\n */\r\nexport function formatHistory(\r\n  messages: ConversationMessage[],\r\n  limit = 10,\r\n): string {\r\n  if (!messages.length) return \"\";\r\n\r\n  const recent = messages.slice(-limit);\r\n  const formatted = recent\r\n    .map((m) => `**${m.role}**: ${m.content}`)\r\n    .join(\"\\n\\n\");\r\n\r\n  return `\\n## Recent Messages\\n\\n${formatted}\\n`;\r\n}\r\n\r\n/**\r\n * Instructions for working memory\r\n */\r\nexport function getWorkingMemoryInstructions(template: string): string {\r\n  return `\r\n## Working Memory\r\n\r\nYou have access to persistent working memory that stores user preferences, context, and important facts across conversations.\r\n\r\n**ALWAYS call updateWorkingMemory when:**\r\n- User shares OR corrects their name, role, company, or preferences\r\n- User provides OR updates important facts you should remember\r\n- User corrects previous information about themselves\r\n- Any new or changed context that should persist for future conversations\r\n\r\n**Template structure to follow:**\r\n\\`\\`\\`\r\n${template}\r\n\\`\\`\\`\r\n\r\n**Critical:** After calling updateWorkingMemory, respond to the user confirming the update.\r\n`.trim();\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACKO,IAAM,mBAAmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAezB,SAAS,oBAAoB,QAAsC;AACxE,MAAI,CAAC,QAAQ,QAAS,QAAO;AAC7B,SAAO;AAAA;AAAA;AAAA,EAA0B,OAAO,OAAO;AAAA;AACjD;AAKO,SAAS,cACd,UACA,QAAQ,IACA;AACR,MAAI,CAAC,SAAS,OAAQ,QAAO;AAE7B,QAAM,SAAS,SAAS,MAAM,CAAC,KAAK;AACpC,QAAM,YAAY,OACf,IAAI,CAAC,MAAM,KAAK,EAAE,IAAI,OAAO,EAAE,OAAO,EAAE,EACxC,KAAK,MAAM;AAEd,SAAO;AAAA;AAAA;AAAA,EAA2B,SAAS;AAAA;AAC7C;AAKO,SAAS,6BAA6B,UAA0B;AACrE,SAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAaP,QAAQ;AAAA;AAAA;AAAA;AAAA,EAIR,KAAK;AACP;","names":[]}